!function(t){var e={};function i(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(s,r,function(e){return t[e]}.bind(null,r));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i=function(t,e){var i=t[1]||"",s=t[3];if(!s)return i;if(e&&"function"==typeof btoa){var r=(a=s,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),n=s.sources.map((function(t){return"/*# sourceURL="+s.sourceRoot+t+" */"}));return[i].concat(n).concat([r]).join("\n")}var a;return[i].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+i+"}":i})).join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var s={},r=0;r<this.length;r++){var n=this[r][0];"number"==typeof n&&(s[n]=!0)}for(r=0;r<t.length;r++){var a=t[r];"number"==typeof a[0]&&s[a[0]]||(i&&!a[2]?a[2]=i:i&&(a[2]="("+a[2]+") and ("+i+")"),e.push(a))}},e}},function(t,e,i){var s,r,n={},a=(s=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=s.apply(this,arguments)),r}),o=function(t,e){return e?e.querySelector(t):document.querySelector(t)},h=function(t){var e={};return function(t,i){if("function"==typeof t)return t();if(void 0===e[t]){var s=o.call(this,t,i);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(t){s=null}e[t]=s}return e[t]}}(),l=null,c=0,p=[],d=i(9);function u(t,e){for(var i=0;i<t.length;i++){var s=t[i],r=n[s.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](s.parts[a]);for(;a<s.parts.length;a++)r.parts.push(x(s.parts[a],e))}else{var o=[];for(a=0;a<s.parts.length;a++)o.push(x(s.parts[a],e));n[s.id]={id:s.id,refs:1,parts:o}}}}function f(t,e){for(var i=[],s={},r=0;r<t.length;r++){var n=t[r],a=e.base?n[0]+e.base:n[0],o={css:n[1],media:n[2],sourceMap:n[3]};s[a]?s[a].parts.push(o):i.push(s[a]={id:a,parts:[o]})}return i}function m(t,e){var i=h(t.insertInto);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var s=p[p.length-1];if("top"===t.insertAt)s?s.nextSibling?i.insertBefore(e,s.nextSibling):i.appendChild(e):i.insertBefore(e,i.firstChild),p.push(e);else if("bottom"===t.insertAt)i.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=h(t.insertAt.before,i);i.insertBefore(e,r)}}function g(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=p.indexOf(t);e>=0&&p.splice(e,1)}function v(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var s=function(){0;return i.nc}();s&&(t.attrs.nonce=s)}return y(e,t.attrs),m(t,e),e}function y(t,e){Object.keys(e).forEach((function(i){t.setAttribute(i,e[i])}))}function x(t,e){var i,s,r,n;if(e.transform&&t.css){if(!(n="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=n}if(e.singleton){var a=c++;i=l||(l=v(e)),s=w.bind(null,i,a,!1),r=w.bind(null,i,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",y(e,t.attrs),m(t,e),e}(e),s=S.bind(null,i,e),r=function(){g(i),i.href&&URL.revokeObjectURL(i.href)}):(i=v(e),s=M.bind(null,i),r=function(){g(i)});return s(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;s(t=e)}else r()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=a()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var i=f(t,e);return u(i,e),function(t){for(var s=[],r=0;r<i.length;r++){var a=i[r];(o=n[a.id]).refs--,s.push(o)}t&&u(f(t,e),e);for(r=0;r<s.length;r++){var o;if(0===(o=s[r]).refs){for(var h=0;h<o.parts.length;h++)o.parts[h]();delete n[o.id]}}}};var b,k=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join("\n")});function w(t,e,i,s){var r=i?"":s.css;if(t.styleSheet)t.styleSheet.cssText=k(e,r);else{var n=document.createTextNode(r),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(n,a[e]):t.appendChild(n)}}function M(t,e){var i=e.css,s=e.media;if(s&&t.setAttribute("media",s),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}function S(t,e,i){var s=i.css,r=i.sourceMap,n=void 0===e.convertToAbsoluteUrls&&r;(e.convertToAbsoluteUrls||n)&&(s=d(s)),r&&(s+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var a=new Blob([s],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(a),o&&URL.revokeObjectURL(o)}},function(t,e,i){self.Big=i(3),i(4),i(5),i(6),i(7),i(10),i(12)},function(t,e,i){var s;!function(r){"use strict";var n,a=1e6,o="[big.js] ",h=o+"Invalid ",l=h+"decimal places",c=h+"rounding mode",p=o+"Division by zero",d={},u=void 0,f=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function m(t,e,i,s){var r=t.c,n=t.e+e+1;if(n<r.length){if(1===i)s=5<=r[n];else if(2===i)s=5<r[n]||5==r[n]&&(s||n<0||r[n+1]!==u||1&r[n-1]);else if(3===i)s=s||!!r[0];else if(s=!1,0!==i)throw Error(c);if(n<1)r.length=1,r[0]=s?(t.e=-e,1):t.e=0;else{if(r.length=n--,s)for(;9<++r[n];)r[n]=0,n--||(++t.e,r.unshift(1));for(n=r.length;!r[--n];)r.pop()}}else if(i<0||3<i||i!==~~i)throw Error(c);return t}function g(t,e,i,s){var r,n,o=t.constructor,c=!t.c[0];if(i!==u){if(i!==~~i||i<(3==e)||a<i)throw Error(3==e?h+"precision":l);for(i=s-(t=new o(t)).e,t.c.length>++s&&m(t,i,o.RM),2==e&&(s=t.e+i+1);t.c.length<s;)t.c.push(0)}if(r=t.e,i=(n=t.c.join("")).length,2!=e&&(1==e||3==e&&s<=r||r<=o.NE||r>=o.PE))n=n.charAt(0)+(1<i?"."+n.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)n="0"+n;n="0."+n}else if(0<r)if(++r>i)for(r-=i;r--;)n+="0";else r<i&&(n=n.slice(0,r)+"."+n.slice(r));else 1<i&&(n=n.charAt(0)+"."+n.slice(1));return t.s<0&&(!c||4==e)?"-"+n:n}d.abs=function(){var t=new this.constructor(this);return t.s=1,t},d.cmp=function(t){var e,i=this,s=i.c,r=(t=new i.constructor(t)).c,n=i.s,a=t.s,o=i.e,h=t.e;if(!s[0]||!r[0])return s[0]?n:r[0]?-a:0;if(n!=a)return n;if(e=n<0,o!=h)return h<o^e?1:-1;for(a=(o=s.length)<(h=r.length)?o:h,n=-1;++n<a;)if(s[n]!=r[n])return s[n]>r[n]^e?1:-1;return o==h?0:h<o^e?1:-1},d.div=function(t){var e=this,i=e.constructor,s=e.c,r=(t=new i(t)).c,n=e.s==t.s?1:-1,o=i.DP;if(o!==~~o||o<0||a<o)throw Error(l);if(!r[0])throw Error(p);if(!s[0])return new i(0*n);var h,c,d,f,g,v=r.slice(),y=h=r.length,x=s.length,b=s.slice(0,h),k=b.length,w=t,M=w.c=[],S=0,j=o+(w.e=e.e-t.e)+1;for(w.s=n,n=j<0?0:j,v.unshift(0);k++<h;)b.push(0);do{for(d=0;d<10;d++){if(h!=(k=b.length))f=k<h?1:-1;else for(g=-1,f=0;++g<h;)if(r[g]!=b[g]){f=r[g]>b[g]?1:-1;break}if(!(f<0))break;for(c=k==h?r:v;k;){if(b[--k]<c[k]){for(g=k;g&&!b[--g];)b[g]=9;--b[g],b[k]+=10}b[k]-=c[k]}for(;!b[0];)b.shift()}M[S++]=f?d:++d,b[0]&&f?b[k]=s[y]||0:b=[s[y]]}while((y++<x||b[0]!==u)&&n--);return M[0]||1==S||(M.shift(),w.e--),j<S&&m(w,o,i.RM,b[0]!==u),w},d.eq=function(t){return!this.cmp(t)},d.gt=function(t){return 0<this.cmp(t)},d.gte=function(t){return-1<this.cmp(t)},d.lt=function(t){return this.cmp(t)<0},d.lte=function(t){return this.cmp(t)<1},d.minus=d.sub=function(t){var e,i,s,r,n=this,a=n.constructor,o=n.s,h=(t=new a(t)).s;if(o!=h)return t.s=-h,n.plus(t);var l=n.c.slice(),c=n.e,p=t.c,d=t.e;if(!l[0]||!p[0])return p[0]?(t.s=-h,t):new a(l[0]?n:0);if(o=c-d){for((s=(r=o<0)?(o=-o,l):(d=c,p)).reverse(),h=o;h--;)s.push(0);s.reverse()}else for(i=((r=l.length<p.length)?l:p).length,o=h=0;h<i;h++)if(l[h]!=p[h]){r=l[h]<p[h];break}if(r&&(s=l,l=p,p=s,t.s=-t.s),0<(h=(i=p.length)-(e=l.length)))for(;h--;)l[e++]=0;for(h=e;o<i;){if(l[--i]<p[i]){for(e=i;e&&!l[--e];)l[e]=9;--l[e],l[i]+=10}l[i]-=p[i]}for(;0===l[--h];)l.pop();for(;0===l[0];)l.shift(),--d;return l[0]||(t.s=1,l=[d=0]),t.c=l,t.e=d,t},d.mod=function(t){var e,i=this,s=i.constructor,r=i.s,n=(t=new s(t)).s;if(!t.c[0])throw Error(p);return i.s=t.s=1,e=1==t.cmp(i),i.s=r,t.s=n,e?new s(i):(r=s.DP,n=s.RM,s.DP=s.RM=0,i=i.div(t),s.DP=r,s.RM=n,this.minus(i.times(t)))},d.plus=d.add=function(t){var e,i=this,s=i.constructor,r=i.s,n=(t=new s(t)).s;if(r!=n)return t.s=-n,i.minus(t);var a=i.e,o=i.c,h=t.e,l=t.c;if(!o[0]||!l[0])return l[0]?t:new s(o[0]?i:0*r);if(o=o.slice(),r=a-h){for((e=0<r?(h=a,l):(r=-r,o)).reverse();r--;)e.push(0);e.reverse()}for(o.length-l.length<0&&(e=l,l=o,o=e),r=l.length,n=0;r;o[r]%=10)n=(o[--r]=o[r]+l[r]+n)/10|0;for(n&&(o.unshift(n),++h),r=o.length;0===o[--r];)o.pop();return t.c=o,t.e=h,t},d.pow=function(t){var e=this,i=new e.constructor(1),s=i,r=t<0;if(t!==~~t||t<-1e6||1e6<t)throw Error(h+"exponent");for(r&&(t=-t);1&t&&(s=s.times(e)),t>>=1;)e=e.times(e);return r?i.div(s):s},d.round=function(t,e){var i=this.constructor;if(t===u)t=0;else if(t!==~~t||t<-a||a<t)throw Error(l);return m(new i(this),t,e===u?i.RM:e)},d.sqrt=function(){var t,e,i,s=this,r=s.constructor,n=s.s,a=s.e,h=new r(.5);if(!s.c[0])return new r(s);if(n<0)throw Error(o+"No square root");for(a=(t=0===(n=Math.sqrt(s+""))||n===1/0?((e=s.c.join("")).length+a&1||(e+="0"),a=((a+1)/2|0)-(a<0||1&a),new r(((n=Math.sqrt(e))==1/0?"1e":(n=n.toExponential()).slice(0,n.indexOf("e")+1))+a)):new r(n)).e+(r.DP+=4);i=t,t=h.times(i.plus(s.div(i))),i.c.slice(0,a).join("")!==t.c.slice(0,a).join(""););return m(t,r.DP-=4,r.RM)},d.times=d.mul=function(t){var e,i=this.constructor,s=this.c,r=(t=new i(t)).c,n=s.length,a=r.length,o=this.e,h=t.e;if(t.s=this.s==t.s?1:-1,!s[0]||!r[0])return new i(0*t.s);for(t.e=o+h,n<a&&(e=s,s=r,r=e,h=n,n=a,a=h),e=new Array(h=n+a);h--;)e[h]=0;for(o=a;o--;){for(a=0,h=n+o;o<h;)a=e[h]+r[o]*s[h-o-1]+a,e[h--]=a%10,a=a/10|0;e[h]=(e[h]+a)%10}for(a?++t.e:e.shift(),o=e.length;!e[--o];)e.pop();return t.c=e,t},d.toExponential=function(t){return g(this,1,t,t)},d.toFixed=function(t){return g(this,2,t,this.e+t)},d.toPrecision=function(t){return g(this,3,t,t-1)},d.toString=function(){return g(this)},d.valueOf=d.toJSON=function(){return g(this,4)},(n=function t(){function e(i){var s=this;if(!(s instanceof e))return i===u?t():new e(i);i instanceof e?(s.s=i.s,s.e=i.e,s.c=i.c.slice()):function(t,e){var i,s,r;if(0===e&&1/e<0)e="-0";else if(!f.test(e+=""))throw Error(h+"number");for(t.s="-"==e.charAt(0)?(e=e.slice(1),-1):1,-1<(i=e.indexOf("."))&&(e=e.replace(".","")),0<(s=e.search(/e/i))?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),r=e.length,s=0;s<r&&"0"==e.charAt(s);)++s;if(s==r)t.c=[t.e=0];else{for(;0<r&&"0"==e.charAt(--r););for(t.e=i-s-1,t.c=[],i=0;s<=r;)t.c[i++]=+e.charAt(s++)}}(s,i),s.constructor=e}return e.prototype=d,e.DP=20,e.RM=1,e.NE=-7,e.PE=21,e.version="5.2.2",e}()).default=n.Big=n,void 0===(s=function(){return n}.call(e,i,e,t))||(t.exports=s)}()},function(t,e){
/*!
 * stuQuery
 */
!function(t){var e={};function i(t){for(var e in this.stuquery="1.0.24",this.getBy=function(e,i){var s,r,n;s=-1;var a=[];if(i.indexOf(":eq")>0&&(r=i.replace(/(.*)\:eq\(([0-9]+)\)/,"$1 $2").split(" "),i=r[0],s=parseInt(r[1])),(t="."==i[0]?e.getElementsByClassName(i.substr(1)):"#"==i[0]?e.getElementById(i.substr(1)):e.getElementsByTagName(i))||(t=[]),t.nodeName&&"SELECT"==t.nodeName)a.push(t);else{for("number"!=typeof t.length&&(t=[t]),n=0;n<t.length;n++)a.push(t[n]);s>=0&&a.length>0&&(a=s<a.length?[a[s]]:[])}return a},this.matchSelector=function(t,e){if("."==e[0]){e=e.substr(1);for(var i=0;i<t.classList.length;i++)if(t.classList[i]==e)return!0}else if("#"==e[0]){if(t.id==e.substr(1))return!0}else if(t.tagName==e.toUpperCase())return!0;return!1},"string"==typeof t?this.e=this.querySelector(document,t):"object"==typeof t&&(this.e="number"==typeof t.length?t:[t]),this.e)this.e[e]&&(this[e]=this.e[e]);return this.length=this.e?this.e.length:0,this}function s(t,e){if(t&&t.length>0)for(var i=0;i<t.length;i++)if(t[i].node==e)return{success:!0,match:i};return{success:!1}}function r(t,i,s,r,n){e[i]||(e[i]=[]),e[i].push({node:t,fn:s,fn2:r,data:n})}function n(t){if(e[t.type]){var i=s(e[t.type],t.currentTarget);if(i.success)return i.match.data&&(t.data=e[t.type][i.match].data),{fn:e[t.type][i.match].fn,data:t}}return function(){return{fn:""}}}function a(t,e,i,s){for(var r=[],n=0;n<t.length;n++){r.push(t[n].getAttribute(e));var a=!1;for(var o in s)typeof i===s[o]&&(a=!0);a&&(i?t[n].setAttribute(e,i):t[n].removeAttribute(e))}return 1==r.length&&(r=r[0]),void 0===i?r:t}i.prototype.querySelector=function(t,e){var i,s,r,n,a,o,h=[];if(e.indexOf(":eq")>=0)for(i=e.split(" "),r=0;r<i.length;r++)if(0==r)o=this.getBy(t,i[r]);else{for(s=[],n=0;n<o.length;n++)s=s.concat(this.getBy(o[n],i[r]));o=s.splice(0)}else o=t.querySelectorAll(e);for(a=0;a<o.length;a++)h.push(o[a]);return h},i.prototype.ready=function(t){/in/.test(document.readyState)?setTimeout("S(document).ready("+t+")",9):t()},i.prototype.html=function(t){if("number"==typeof t&&(t=""+t),"string"!=typeof t&&1==this.length)return this[0].innerHTML;if("string"==typeof t)for(var e=0;e<this.length;e++)this[e].innerHTML=t;return this},i.prototype.append=function(t){if(!t&&1==this.length)return this[0].innerHTML;if(t)for(var e=0;e<this.length;e++){var i=document.createElement("template");i.innerHTML=t;var s=void 0===i.content?i:i.content;if(s.childNodes.length>0)for(;s.childNodes.length>0;)this[e].appendChild(s.childNodes[0]);else this[e].append(t)}return this},i.prototype.prepend=function(t){var e,i,s,r;if(!t&&1==this.length)return this[0].innerHTML;for(e=0;e<this.length;e++)for((s=document.createElement("div")).innerHTML=t,i=(r=s.childNodes).length-1;i>=0;i--)this[e].insertBefore(r[i],this[e].firstChild);return this},i.prototype.before=function(t){var e,i,s,r;for(e=0;e<this.length;e++)for((i=document.createElement("div")).innerHTML=t,s=i.childNodes,r=0;r<s.length;r++)this[e].parentNode.insertBefore(s[r],this[e]);return this},i.prototype.after=function(t){for(var e=0;e<this.length;e++)this[e].insertAdjacentHTML("afterend",t);return this},i.prototype.off=function(t){"function"!=typeof Element.prototype.removeEventListener&&(Element.prototype.removeEventListener=function(t,e){if(oListeners.hasOwnProperty(t)){for(var i=oListeners[t],s=-1,r=0;r<i.aEls.length;r++)if(i.aEls[r]===this){s=r;break}if(-1!==s)for(var n=0,a=i.aEvts[s];n<a.length;n++)a[n]===e&&a.splice(n,1)}});for(var i=0;i<this.length;i++){var r=s(e[t],this.e[i]);r.success&&(this[i].removeEventListener(t,e[t][r.match].fn2,!1),e[t].splice(r.match,1))}return this},i.prototype.on=function(t,e,i){var s=(t||window.event).split(/ /);if("function"!=typeof e||i||(i=e,e=""),"function"!=typeof i)return this;if(this.length>0)for(var a,o=this,h=0;h<s.length;h++){t=s[h],a=function(i){var s=n({currentTarget:this,type:t,data:e,originalEvent:i,preventDefault:function(){i.preventDefault&&i.preventDefault()},stopPropagation:function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),i.stopPropagation&&i.stopPropagation(),null!=i.cancelBubble&&(i.cancelBubble=!0)}});if("function"==typeof s.fn)return s.fn.call(o,s.data)};for(var l=0;l<this.length;l++)r(this[l],t,i,a,e),this[l].addEventListener?this[l].addEventListener(t,a,!1):this[l].attachEvent&&this[l].attachEvent(t,a)}return this},i.prototype.trigger=function(t){for(var e,i=t.split(/ /),s=0;s<i.length;s++){document.createEvent?(e=document.createEvent("HTMLEvents")).initEvent(i[s],!0,!0):(e=document.createEventObject()).eventType=i[s],e.eventName=t;for(var r=0;r<this.length;r++)document.createEvent?this[r].dispatchEvent(e):this[r].fireEvent("on"+e.eventType,e)}return this},i.prototype.focus=function(){return 1==this.length&&this[0].focus(),this},i.prototype.blur=function(){return 1==this.length&&this[0].blur(),this},i.prototype.remove=function(){if(this.length<1)return this;for(var t=this.length-1;t>=0;t--){if(!this[t])return;"function"==typeof this[t].remove?this[t].remove():"function"==typeof this[t].parentElement.removeChild&&this[t].parentElement.removeChild(this[t])}return this},i.prototype.hasClass=function(t){for(var e=!0,i=0;i<this.length;i++)this[i].className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))||(e=!1);return e},i.prototype.toggleClass=function(t){for(var e=0;e<this.length;e++)this[e].className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))?this[e].className=this[e].className.replace(new RegExp("(\\s|^)"+t+"(\\s|$)","g")," ").replace(/ $/,""):this[e].className=(this[e].className+" "+t).replace(/^ /,"");return this},i.prototype.addClass=function(t){for(var e=0;e<this.length;e++)this[e].className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))||(this[e].className=(this[e].className+" "+t).replace(/^ /,""));return this},i.prototype.removeClass=function(t){for(var e=0;e<this.length;e++)for(;this[e].className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"));)this[e].className=this[e].className.replace(new RegExp("(\\s|^)"+t+"(\\s|$)","g")," ").replace(/ $/,"").replace(/^ /,"");return this},i.prototype.css=function(t){var e,i,s;if(1==this.length&&"string"==typeof t)return(e=window.getComputedStyle(this[0]))[t];for(i=0;i<this.length;i++){if(e={},this[i].getAttribute("style"))for(var r=this[i].getAttribute("style").split(";"),n=0;n<r.length;n++){var a=r[n].split(":");2==a.length&&(e[a[0]]=a[1])}if("object"==typeof t){for(s in t)void 0!==t[s]&&(e[s]=t[s]);var o="";for(s in e)void 0!==e[s]&&(o&&(o+=";"),e[s]&&(o+=s+":"+e[s]));this[i].setAttribute("style",o)}}return this},i.prototype.parent=function(){for(var t=[],e=0;e<this.length;e++)t.push(this[e].parentElement);return S(t)},i.prototype.children=function(t){var e;if("string"==typeof t){var i=[];for(e=0;e<this.length;e++)for(var s=0;s<this[e].children.length;s++)this.matchSelector(this[e].children[s],t)&&i.push(this[e].children[s]);return S(i)}for(e=0;e<this.length;e++)this[e]=this[e].children.length>t?this[e].children[t]:this[e];return this},i.prototype.find=function(t){for(var e=[],i=0;i<this.length;i++)e=e.concat(this.querySelector(this[i],t));return S(e)},i.prototype.attr=function(t,e){return a(this,t,e,["string","number"])},i.prototype.prop=function(t,e){return a(this,t,e,["boolean"])},i.prototype.clone=function(){var t=document.createElement("div");return t.appendChild(this[0].cloneNode(!0)),t.innerHTML},i.prototype.replaceWith=function(t){for(var e,i=S(this.e),s=0;s<this.length;s++)(e=document.createElement("div")).innerHTML=t,i[s]=e.cloneNode(!0),this[s].parentNode.replaceChild(i[s],this[s]);return i},i.prototype.width=function(){if(!(this.length>1))return this[0].offsetWidth},i.prototype.height=function(){if(!(this.length>1))return this[0].offsetHeight},i.prototype.outerWidth=function(){if(!(this.length>1)){var t=getComputedStyle(this[0]);return this[0].offsetWidth+parseInt(t.marginLeft)+parseInt(t.marginRight)}},i.prototype.outerHeight=function(){if(!(this.length>1)){var t=getComputedStyle(this[0]);return this[0].offsetHeight+parseInt(t.marginTop)+parseInt(t.marginBottom)}},i.prototype.offset=function(){var t=this[0].getBoundingClientRect();return{top:t.top+document.body.scrollTop,left:t.left+document.body.scrollLeft}},i.prototype.position=function(){if(!(this.length>1))return{left:this[0].offsetLeft,top:this[0].offsetTop}},i.prototype.ajax=function(t,e){if("string"!=typeof t)return!1;e||(e={});var i,s,r="",n="";if(t.indexOf("?")>0&&(s=t.split("?")).length&&(t=s[0],n=s[1]),"jsonp"==e.dataType&&(r="fn_"+(new Date).getTime(),window[r]=function(t){"function"==typeof e.success&&e.success.call(e.this?e.this:this,t,e)}),"boolean"!=typeof e.cache||e.cache||(n+=(n?"&":"")+(new Date).valueOf()),r&&(n+=(n?"&":"")+"callback="+r),e.data&&(n+=(n?"&":"")+e.data),e.url=t+(n?"?"+n:""),"jsonp"==e.dataType){var a=document.createElement("script");return a.src=e.url,document.body.appendChild(a),this}(i=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).addEventListener("load",window[r]||function(t){var s;if(e.header=i.getAllResponseHeaders(),200==i.status||201==i.status||202==i.status){if(s=i.response,""!=i.responseType&&"text"!=i.responseType||(s=i.responseText),"json"==e.dataType)try{"string"==typeof s&&(s=JSON.parse(s.replace(/[\n\r]/g,"\\n").replace(/^([^\(]+)\((.*)\)([^\)]*)$/,(function(t,e,i,s){return e==r?i:""})).replace(/\\n/g,"\n")))}catch(t){h(t)}if("script"==e.dataType){var n=document.createElement("script");n.setAttribute("type","text/javascript"),n.innerHTML=s,document.head.appendChild(n)}e.statusText="success","function"==typeof e.success&&e.success.call(e.this?e.this:this,s,e)}else e.statusText="error",h(t);"function"==typeof e.complete&&e.complete.call(e.this?e.this:this,s,e)}),i.addEventListener("error",h),i.addEventListener("progress",(function(t){"function"==typeof e.progress&&e.progress.call(e.this?e.this:this,t,e)}));var o="responseType"in i;function h(t){"function"==typeof e.error&&e.error.call(e.this?e.this:this,t,e)}if(e.beforeSend&&(i=e.beforeSend.call(e.this?e.this:this,i,e)),o&&e.dataType)try{i.responseType=e.dataType}catch(t){h(t)}try{i.open("GET",e.url)}catch(t){h(t)}try{i.send()}catch(t){h(t)}return this},i.prototype.loadJSON=function(t,e,i){return i||(i={}),i.dataType="json",i.complete=e,this.ajax(t,i),this},t.stuQuery=i,t.S=function(t){return new i(t)}}(window||this)},function(t,e){!function(t){function e(t){return JSON.parse(JSON.stringify(t))}function i(t,e){var i=s(t,e);return"rgba("+i.r+","+i.g+","+i.b+","+i.a+")"}function s(t,e){var i,s,r;return e=e||1,0==t.indexOf("#")?(i=parseInt(t.substr(1,2),16),s=parseInt(t.substr(3,2),16),r=parseInt(t.substr(5,2),16)):0==t.indexOf("rgba")?t.replace(/rgba\(([0-9]+),([0-9]+),([0-9]+),([0-9\.]+)\)/,(function(t,n,a,o,h){return i=parseInt(n),s=parseInt(a),r=parseInt(o),e=parseFloat(h),t})):0==t.indexOf("rgb(")&&t.replace(/rgb\(([0-9]+),([0-9]+),([0-9]+)\)/,(function(t,e,n,a){return i=e,s=n,r=a,t})),{r:i,g:s,b:r,a:e}}var r=!1;function n(t){function e(t){return this.type="Num",this.o=t,this.v=r?new Big(null==t?0:t):parseFloat(t),this.toValue=function(){return Number(this.v.toString())},this.toString=function(){return("string"==typeof this.o?this.o:this.o.toString()).replace(/(\.[0-9]+?)0+$/,(function(t,e){return e}))},this.toExponential=function(t){return this.v.toExponential(t)},this}return e.prototype.eq=function(t){return this.v.eq(t)},e.prototype.gt=function(t){return this.v.gt(t)},e.prototype.gte=function(t){return this.v.gte(t)},e.prototype.lt=function(t){return this.v.lt(t)},e.prototype.lte=function(t){return this.v.lte(t)},e.prototype.abs=function(){return n(this.v.abs())},e.prototype.plus=function(t){return n(this.v.plus(t))},e.prototype.minus=function(t){return n(this.v.minus(t))},e.prototype.div=function(t){return n(this.v.div(t))},e.prototype.times=function(t){return n(this.v.times(t))},e.prototype.pow=function(t){return n(this.v.pow(t))},e.prototype.pow10=function(t){var e=n(this);return e.v.e+=t,e},e.prototype.round=function(t,e){return n(this.v.round(t,"number"==typeof e?e:1))},e.prototype.floor=function(t){return n(this.v.round(t,0))},e.prototype.ceil=function(t){return n(this.v.round(t,3))},new e(t)}"function"==typeof Big&&(r=!0),t.Num=n;
/*@cc_on
	// Fix for IE's inability to handle arguments to setTimeout/setInterval
	// From http://webreflection.blogspot.com/2007/06/simple-settimeout-setinterval-extra.html
	(function(f){
		window.setTimeout =f(window.setTimeout);
		window.setInterval =f(window.setInterval);
	})(function(f){return function(c,t){var a=[].slice.call(arguments,2);return f(function(){c.apply(this,a)},t)}});
	@*/
var a={supportsFullScreen:!1,isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",prefix:""},o="webkit moz o ms khtml".split(" ");if(void 0!==document.cancelFullScreen)a.supportsFullScreen=!0;else for(var h=0,l=o.length;h<l;h++)if(a.prefix=o[h],void 0!==document[a.prefix+"CancelFullScreen"]){a.supportsFullScreen=!0;break}a.supportsFullScreen&&(a.fullScreenEventName=a.prefix+"fullscreenchange",a.isFullScreen=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}},a.requestFullScreen=function(t){return""===this.prefix?t.requestFullScreen():t[this.prefix+"RequestFullScreen"]()},a.cancelFullScreen=function(t){return""===this.prefix?document.cancelFullScreen():document[this.prefix+"CancelFullScreen"]()},a.element=function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement}),t.fullScreenApi=a,Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)});var c={};function p(t,e){return typeof t==e}function d(t,e){return(e-=t.toString().length)>0?new Array(e+(/\./.test(t)?2:1)).join("0")+t:t+""}function u(t,e){var i;if("undefined"!=typeof window)return t?(t.currentStyle?i=t.currentStyle[e]:window.getComputedStyle&&(i=document.defaultView.getComputedStyle(t,null).getPropertyValue(e)),i&&0===i.length&&(i=null),i):i}function f(t,i){var s,r,n,a,o,h,l;for(s=t.currentTarget,r=e(t.originalEvent),n=[],a=[],o=0;o<i.length;o++)n.push(i[o].pageX),a.push(i[o].pageY);return r.layerX=c.mean(n)-s.offsetLeft,r.layerY=c.mean(a)-s.offsetTop,r.offsetX=s.offsetLeft,r.offsetY=s.offsetTop,l=document.body.getBoundingClientRect(),h=s.getBoundingClientRect(),r.layerX-=h.left-l.left,r.layerY-=h.top-l.top,r}function m(e,i){if("object"==typeof e){i||(i={}),this.canvas="",this.c="",this.wide=0,this.tall=0,this.fullwindow=!1,this.fullscreen=!1,this.transparent=!1,this.color="",this.background="rgb(255,255,255)",this.events={resize:""},this.logging=!1,this.scale=1,this.ie=!1,this.excanvas="undefined"!=typeof G_vmlCanvasManager;
/*@cc_on
		this.ie = true
		@*/
var s="number",r="string",n="boolean";if(p(i.logging,n)&&(this.logging=i.logging),p(i.background,r)&&(this.background=i.background),p(i.color,r)&&(this.color=i.color),p(i.width,s)&&(this.wide=i.width),p(i.height,s)&&(this.tall=i.height),p(i.fullwindow,n)&&(this.fullwindow=i.fullwindow),p(i.transparent,n)&&(this.transparent=i.transparent),p(i.scale,s)&&(this.scale=i.scale),this.log=new N({id:"Canvas",logging:this.logging}),this.log.message("Canvas",e,this.wide,this.tall),this.container=S(e),this.log.message("Container width",this.container.width(),this.container[0],e),this.origcontainer=this.container[0].outerHTML,"DIV"!==this.container[0].nodeName&&(this.container=this.container.replaceWith("<div></div>")),0!=this.container.length){this.container.css({position:"relative",width:this.wide,height:this.tall});var o=this;if(t.addEventListener("resize",(function(t){o.resize()})),this.wide>0&&this.container.css({width:this.wide+"px"}),this.wide=this.container.width(),this.tall>0&&this.container.css({height:this.tall+"px"}),this.tall=this.container.height(),this.container.html('<div class="canvasholder"><canvas class="canvas" style="display:block;font:inherit;"></canvas></div>'),this.containerbg=this.container.css("background"),this.canvasholder=this.container.find(".canvasholder"),this.canvas=this.container.find("canvas"),this.canvasholder.css({position:"relative"}),this.canvas.css({position:"absolute"}),this.c=this.canvas[0],this.excanvas&&(this.c=G_vmlCanvasManager.initElement(this.c)),this.c&&this.c.getContext){this.ctx=this.c.getContext("2d"),this.setWH(this.wide,this.tall),this.ctx.clearRect(0,0,this.wide*this.scale,this.tall*this.scale),this.ctx.beginPath();this.ctx.font="16px sans-serif",this.ctx.fillStyle="rgb(0,0,0)",this.ctx.lineWidth=1.5;this.ctx.fillText("Loading graph...",(this.wide-this.ctx.measureText("Loading graph...").width)/2,(this.tall-16)/2),this.ctx.fill()}if(this.canvas.on("mousedown",{me:this},(function(t){t.data.me.trigger("mousedown",{event:t})})),this.canvas.on("mousemove",{me:this},(function(t){t.data.me.trigger("mousemove",{event:t})})),this.canvas.on("mouseup",{me:this},(function(t){t.data.me.trigger("mouseup",{event:t})})),this.canvas.on("mouseover",{me:this},(function(t){t.data.me.trigger("mouseover",{event:t})})),this.canvas.on("mouseleave",{me:this},(function(t){t.data.me.trigger("mouseleave",{event:t})})),this.canvasholder.on("wheel",{me:this},(function(t){t.data.me.trigger("wheel",{event:t})})),"ontouchstart"in document.documentElement){var h=null;this.canvasholder.on("touchstart",{me:this},(function(t){var e=t.originalEvent;e.preventDefault(),h=null;var i=e.touches;i&&1==i.length&&(t.originalEvent=f(t,i),t.originalEvent.which=1,t.data.me.trigger("mousedown",{event:t}),t.data.me.trigger("mouseover",{event:t}))}));var l=null;this.canvasholder.on("touchmove",{me:this},(function(t){t.originalEvent.preventDefault();var e=t.data.me,i=t.originalEvent.touches,s=i?i.length:0;if(t.originalEvent=f(t,i),l=t.originalEvent,"boolean"!=typeof e.updating&&(e.updating=!1),!e.updating)if(1==s)t.originalEvent.which=1,e.trigger("mousemove",{event:t});else if(2==s){var r=Math.hypot(i[0].pageX-i[1].pageX,i[0].pageY-i[1].pageY);t.originalEvent.deltaY=h?r>h?-1:1:-1,Math.abs(r-h)>4&&(e.trigger("wheel",{event:t,speed:.95,update:!1}),h=r)}})),this.canvasholder.on("touchend",{me:this},(function(t){var e=t.originalEvent;e.preventDefault();var i=e.touches,s=t;i?(i.length>0&&(t.originalEvent=f(t,i)),t.originalEvent.which=1):s=l,t.data.me.trigger("mouseup",{event:s})}))}a.supportsFullScreen&&document.addEventListener(a.fullScreenEventName,(function(t){o.fullscreen=o.container[0]==a.element()}))}else this.log.error("No valid container provided")}}function g(t,i){if(i||(i={}),this.version="0.3.6","object"==typeof t){this.marks={},this.chart={},this.options={},this.timeout={},this.selecting=!1,this.panning=!1,this.updating=!1,this.events=[],this.lines=[],this.ready=!0,this.fontscale=1,this.quicktime=75,this.colours=["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],this.offset={x:0,y:0,dx:0,dy:0},this.log=new N({id:"Graph",logging:i.logging,logtime:i.logtime}),"undefined"==typeof Big&&this.log.error("ERROR","Unable to find big.js"),this.log.time("Graph"),this.log.message("init",t,typeof t,i);var s={};i.width&&(s.width=i.width),i.height&&(s.height=i.height),s.logging=this.logging,this.canvas=new m(t,s),this.paper={temp:{c:document.createElement("canvas"),ctx:""},data:{c:document.createElement("canvas"),ctx:""}};var r=window.devicePixelRatio;for(var n in this.paper)this.paper[n]&&(this.paper[n]=a(this.paper[n],this.canvas.wide,this.canvas.tall,r));return this.canvas.on("resize",{me:this},(function(t){var e=t.data.me,i=new Date,s=window.devicePixelRatio;for(var r in e.paper)e.paper[r]&&(e.paper[r]=a(e.paper[r],e.canvas.wide,e.canvas.tall,s));e.setOptions().defineAxis("x").setChartOffset().resetDataStyles().redraw({update:!0,callback:function(){this.trigger("resize",{event:t.event})}}),this.log.message("Total until end of resize:"+(new Date-i)+"ms")})).on("mousedown",{me:this},(function(t){var i,s,r,n,a,o,h,l,c,p,d;if(i=t.event.originalEvent,(s=t.data.me).ready||s.stop(),1==i.which){for(r=i.layerX,n=i.layerY,d=s.dataAtMousePosition(r,n),s.within(r,n)&&s.options.zoomable&&(s.selectfrom=[r,n],s.selectto=e(s.selectfrom),i.altKey?s.selecting=!0:s.panning=!0,s.coordinates&&s.coordinates.css({display:"none"}),s.panoptions||(s.panoptions={}),s.panoptions.quick=s.log.metrics.draw.av>=s.quicktime),p=[],a=0;a<d.length;a++)(o=d[a].split(":"))&&3==o.length&&(h=o[0],l=parseInt(o[1]),c=s.getPixPos(r,n),p.push({series:h,n:l,point:s.marks[h].data[l],title:s.marks[h].title,color:s.marks[h].color,xpix:c[0],ypix:c[1]}));return s.trigger("clickpoint",{event:i,matches:p}),!0}})).on("mousemove",{me:this},(function(t){var i,s,r,n,a,o,h,l,c,p;if((i=t.event.originalEvent)&&!(s=t.data.me).updating){if(s.updating=!0,r=i.layerX,n=i.layerY,!s.selecting&&!s.panning&&!s.timeout.wheel){p=s.dataAtMousePosition(i.offsetX,i.offsetY),s.highlight(p),c=[];for(var d=0;d<p.length;d++)(a=p[d].split(":"))&&3==a.length&&(o=a[0],h=parseInt(a[1]),l=s.getPixPos(r,n),c.push({series:o,n:h,point:s.marks[o].data[h],title:s.marks[o].title,color:s.marks[o].color,xpix:l[0],ypix:l[1]}));if(s.trigger("hoverpoint",{event:i,matches:c}),s.events.mousemove){var u=s.pixel2data(r,n);s.trigger("mousemove",{event:i,x:u.x,y:u.y})}}if((s.selecting||s.panning)&&s.within(r,n)){s.selectto=[r,n];var f=e(s.selectto),m=e(s.selectfrom);"x"==s.options.zoommode&&(m[1]=s.getPos("y",s.y.min),f[1]=s.getPos("y",s.y.max)),"y"==s.options.zoommode&&(m[0]=s.getPos("x",s.x.min),f[0]=s.getPos("x",s.x.max)),s.selecting&&(s.canvas.pasteFromClipboard(),s.canvas.ctx.beginPath(),s.canvas.ctx.fillStyle=s.options.grid.colorZoom||"rgba(0,0,0,0.1)",s.canvas.ctx.lineWidth=s.options.grid.border,s.canvas.ctx.fillRect(m[0]-.5,m[1]-.5,f[0]-m[0],f[1]-m[1]),s.canvas.ctx.fill(),s.canvas.ctx.closePath()),s.panning&&s.panBy(f[0]-m[0],f[1]-m[1],s.panoptions)}return s.updating=!1,!0}})).on("mouseleave",{me:this},(function(t){var e=t.data.me,i=t.event.originalEvent;i.offsetX>=e.options.width&&(i.layerX=e.options.width),i.offsetX<=0&&(i.layerX=0),i.offsetY>=e.options.height&&(i.layerY=e.options.height),i.offsetY<=0&&(i.layerY=0),e.canvas.trigger("mousemove",{event:i}),e.canvas.trigger("mouseup",{event:i}),L()})).on("mouseup",{me:this},(function(t){var e,i=t.data.me,s=t.event.originalEvent;if(i.selecting&&((e=i.getDataRange(i.selectfrom[0],i.selectto[0],i.selectfrom[1],i.selectto[1]))[0]==e[1]&&e[2]==e[3]?i.zoom():("x"==i.options.zoommode&&(e[2]=i.y.data.min,e[3]=i.y.data.max),"y"==i.options.zoommode&&(e[0]=i.x.data.min,e[1]=i.x.data.max),i.zoom(e,{update:!0})),i.selecting=!1),i.panning){var r=s.layerX-i.selectfrom[0],n=s.layerY-i.selectfrom[1];i.offset.dx+=r,i.offset.dy+=n,e=i.getDataRange(i.chart.left-r,i.chart.left+i.chart.width-r,i.chart.top-n,i.chart.top+i.chart.height-n),i.zoom(e,{}),i.offset.x=0,i.offset.y=0,i.panning=!1}return i.trigger("mouseup",{event:s}),!0})).on("wheel",{me:this,options:i},(function(t){var e,i,s,r,n,a;!function(){window.addEventListener&&window.addEventListener("DOMMouseScroll",T,!1);window.onwheel=T,window.onmousewheel=document.onmousewheel=T,window.ontouchmove=T,function(){return j=window.innerWidth-S("body")[0].offsetWidth}()>0&&S("body").css({overflow:"hidden","margin-right":j+"px"})}(),e=t.event.originalEvent,(i=t.data.me).timeout.wheel&&clearTimeout(i.timeout.wheel),i.updating||(i.updating=!0,s={x:e.layerX,y:e.layerY},(r=i.coordinates)&&r[0]==e.target&&(s.x+=r[0].offsetLeft,s.y+=r[0].offsetTop),n=t.speed||1-Math.min(40,Math.abs(e.deltaY))/250,a=e.deltaY>0?1/n:n,e.update=t.update,r&&r.css({display:""}),i.zoom([s.x,s.y],{quick:i.log.metrics.draw.av>=i.quicktime,scalex:e.layerX>i.chart.left?a:1,scaley:e.layerY<i.chart.top+i.chart.height?a:1,update:!1}),i.trigger("wheel",{event:e}),i.updating=!1),i.timeout.wheel=setTimeout((function(t){i.canvas.trigger("wheelstop",{event:t})}),100,{event:e})})).on("wheelstop",{me:this,options:i},(function(t){var e=t.data.me;e.updating=!1,e.resetDataStyles(),e.redraw({update:!0,callback:function(){this.timeout.wheel=void 0,this.trigger("wheelstop",{event:t.event}),L()}})})),this.setOptions(i),this.updateData(),this.log.time("Graph"),this}function a(t,e,i,s){return t.width=e,t.height=i,t.scale=s,t.c.width=Math.round(e*s),t.c.height=Math.round(i*s),t.ctx=t.c.getContext("2d"),t.ctx.scale(s,s),t}}function v(t,e){var i,s,r,a,o,h={};for(s in"boolean"!=typeof e.xaxis.highprecision&&(e.xaxis.highprecision=!1),t.parse)if(t.parse[s])for(a=t.parse[s],i=0;i<t.data.length;i++){if(r=t.data[i][s],"string"!=a)if("number"==a)r=parseFloat(r);else if("date"==a)if(null==r||""==r)r=parseFloat(r);else if(e.xaxis.highprecision){o=Math.floor(new Date(r.replace(/(^"|"$)/,"")).getTime()/1e3)+"";var l=r.match(/\.([0-9]+)/);l&&2==l.length&&(o+=l[0]),r=n(o)}else r=new Date(r.replace(/(^"|"$)/,"")).getTime()/1e3;else"boolean"==a&&(r="1"==r||"true"==r||"Y"==r||"0"!=r&&"false"!=r&&"N"!=r&&null);h[t.data[i][s]]=r,t.data[i][s]=r}return t}function y(t){var i,s,r,n,a;for(a=["symbol","rect","lines","area","rule","text","format"],1e4,s=Math.min(t.marks.data.length,t.i+1e4),r=t.i;r<s;r++){for(t.update&&r>1e4&&r%Math.round(t.total/100)==0&&t.attr.progress.call(t.attr.this||this,{mark:t.original,i:r,total:t.total}),t.marks.mark[r]||(t.marks.mark[r]={props:{},data:t.marks.data[r],original:t.marks.original[r]}),n=0;n<a.length;n++)i=a[n],"object"!=typeof t.marks.mark[r].props[i]&&t.marks[i]&&(t.marks.mark[r].props[i]=e(t.marks[i]));t.marks.enter&&(t.marks.mark[r]=t.marks.enter.call(t.this,t.marks.mark[r],t.marks.encode.enter))}t.i=r,r<t.marks.data.length?t.this.timeout.addMark=setTimeout(y,100,t):"function"==typeof t.attr.success&&(t.attr.i=r,t.attr.total=t.total,t.attr.success.call(t.attr.this||this,t.attr))}function x(t){return"string"!=typeof t?"":"0"==t?t:t.replace(/\.0+e/,"e").replace(/\.0{6}[0-9]+e/,"e").replace(/([0-9]+)\.9{6}[0-9]+e/,(function(t,e){var i=parseFloat(e);return i+(i<0?-1:1)+"e"})).replace(/(\.[1-9]+)0+e/,(function(t,e){return e+"e"})).replace(/\.0$/,"").replace(/\.([0-9]+?)0+$/g,(function(t,e){return"."+e}))}function b(t){return t?t.toString().replace(/(\.[0-9]+[1-9])[0]{6,}[1-9]*/,(function(t,e){return e})).replace(/(\.[0-9]+[0-8])[9]{6,}[0-8]*/,(function(t,e){var i=e.length-1;return parseFloat(e).toFixed(i)})).replace(/^0+([0-9]+\.)/g,(function(t,e){return e})):""}function k(t){return t.fontWeight+" "+t.fontSize+"px "+t.font}function w(t,e,i){var s,r,a,o,h,l,c,p,d;for("number"==typeof t&&(t=n(t)),"number"==typeof e&&(e=n(e)),s=e.minus(t).div(i),o=(r=Math.log10(s.toValue()))-(a=Math.floor(r)),h=[1,2,5,10],l=new Array(h.length),c=-1,p=1e100,d=0;d<h.length;d++)l[d]=Math.abs(o-Math.log10(h[d])),l[d]<p&&(p=l[d],c=d);return n(Math.pow(10,a)).times(h[c]).toValue()}function M(t,e){var i,s,r,a,o,h,l,c,p,u,f,m;return f=(m=("number"==typeof t?n(t):t).toString()).indexOf("."),u=[n(m),n(0)],f>=0&&(u=[n(m.substr(0,f)),n("0."+m.substr(f+1,m.length-1))]),e||(e={}),e.method||(e.method="round"),(!e.n||e.n<1)&&(e.n=1),e.range||(e.range=1),e.range<2?e.inc?(r=u[1].div(e.inc).round(0,"floor"==e.method?0:3).times(e.inc),u[0].plus(r)):(console.error("No increment provided"),""):(p=1e3*u[0].toValue(),i={dow:(o=new Date(p)).getUTCDay(),h:o.getUTCHours(),m:o.getUTCMinutes(),s:o.getUTCSeconds()+o.getUTCMilliseconds()/1e3,ms:o.getUTCMilliseconds(),dd:o.getUTCDate(),mm:o.getUTCMonth(),yy:o.getUTCFullYear()},s=n(0),c=!1,i.yy%4==0&&(c=!0),i.yy%100==0&&(c=!1),i.yy%400==0&&(c=!0),l=[31,c?29:28,31,30,31,30,31,31,30,31,30,31],"years"==e.unit?(r=i.yy+(i.mm+(i.dd+(i.h+(i.m+i.s/60)/60)/24)/l[i.mm])/12,0==(a=Math[e.method].call([],r/e.n)*e.n)&&(a=1),s=n(o-new Date(d(a,4)+"-01-01")).div(1e3)):"months"==e.unit?(r=i.mm+i.dd/l[i.mm],(a=Math[e.method].call([],r/e.n)*e.n+1)>12&&(i.yy+=Math.floor(a/12),a%=12),s=n(o-new Date(i.yy+"-"+d(a,2)+"-01")).div(1e3)):"weeks"==e.unit?(r=i.dow+(i.h+(i.m+i.s/60)/60)/24,a=Math[e.method].call([],r/(7*e.n))*(7*e.n),h=864e5,s=n(Math.round((r-a)*h)).div(1e3)):(h=1,"nanoseconds"==e.unit?(r=i.s,h=1e-9):"microseconds"==e.unit?(r=i.s,h=1e-6):"milliseconds"==e.unit?(r=i.s,h=.001):"seconds"==e.unit?(r=i.s,h=1):"minutes"==e.unit?(r=i.m+i.s/60,h=60):"hours"==e.unit?(r=i.h+(i.m+i.s/60)/60,h=3600):"days"==e.unit?(r=i.dd+(i.h+(i.m+i.s/60)/60)/24,h=86400):(r=i.s,h=1),a=(r=n(r).plus(u[1].div(h))).div(e.n).round(0,"floor"==e.method?0:3).times(e.n).times(h),s=(r=r.times(h)).minus(a).round(0,"floor"==e.method?0:3)),u[0].minus(s))}c.sum=function(t){var e,i;for(e=0,i=0;e<t.length;i+=t[e++]);return i},void 0===Array.prototype.max?c.max=function(t){return Math.max.apply({},t)}:c.max=function(t){return t.max()},void 0===Array.prototype.min?c.min=function(t){return Math.min.apply({},t)}:c.min=function(t){return t.min()},c.mean=function(t){return c.sum(t)/t.length},c.stddev=function(t){return Math.sqrt(c.variance(t))},c.log10=function(t){return Math.log10?Math.log10(t):Math.log(t)/2.302585092994046},c.variance=function(t){for(var e=c.mean(t),i=0,s=0;s<t.length;s++)i+=Math.pow(t[s]-e,2);return i/(t.length-1)},c.deepExtend=function(t,i){for(var s in i)"object"==typeof i[s]?Array.isArray(i[s])!=Array.isArray(t[s])?t[s]=e(i[s]):(t[s]=t[s]||{},arguments.callee(t[s],i[s])):t[s]=i[s];return t},void 0===Object.extend?c.extend=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}:c.extend=Object.extend,Object.keys?c.keys=Object.keys:c.keys=function(t){if(t!==Object(t))throw new TypeError("Object.keys called on non-object");var e,i=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.push(e);return i},m.prototype.on=function(t,e,i){return"string"!=typeof t?this:(p(i,"undefined")?(i=e,e={}):e={data:e},"object"!=typeof e||"function"!=typeof i?this:(this.events[t]?this.events[t].push({e:e,fn:i}):this.events[t]=[{e:e,fn:i}],this))},m.prototype.trigger=function(t,e){if("string"==typeof t){"object"!=typeof e&&(e={});var i=[];if("object"==typeof this.events[t])for(var s=0;s<this.events[t].length;s++){var r=c.extend(this.events[t][s].e,e);"function"==typeof this.events[t][s].fn&&i.push(this.events[t][s].fn.call(this,r))}return i.length>0?i:void 0}},m.prototype.copyToClipboard=function(){var t=Math.min(this.wide,this.ctx.canvas.clientWidth)*this.scale,e=Math.min(this.tall,this.ctx.canvas.clientHeight)*this.scale;return this.log.message("copyToClipboard",t,e,this),t>0&&e>0&&(this.clipboard=this.ctx.getImageData(0,0,t,e),this.clipboardData=this.clipboard.data),this},m.prototype.pasteFromClipboard=function(){return this.clipboardData&&(this.clipboard.data=this.clipboardData,this.ctx.putImageData(this.clipboard,0,0)),this},m.prototype.toggleFullScreen=function(){return this.log.message("toggleFullScreen",this.fullscreen),this.elem=this.container[0],this.fullscreen?document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this.elem.requestFullscreen?this.elem.requestFullscreen():this.elem.mozRequestFullScreen?this.elem.mozRequestFullScreen():this.elem.webkitRequestFullscreen?this.elem.webkitRequestFullscreen():this.elem.msRequestFullscreen&&this.elem.msRequestFullscreen(),this.fullscreen=!this.fullscreen,this},m.prototype.resize=function(t,e){this.canvas&&(t&&e||(this.fullscreen?this.container.css({background:"white"}):this.container.css({background:this.containerbg}),this.canvas.css({width:"",height:"","max-width":"100%"}),this.fullwindow?(t=window.outerWidth,e=window.outerHeight,S(document).css({width:t+"px",height:e+"px"})):(this.container.css({"max-width":"100%"}),t=this.container.outerWidth(),e=this.container.outerHeight())),t==this.wide&&e==this.tall||(this.setWH(t,e),this.trigger("resize",{w:t,h:e})))},m.prototype.setWH=function(t,e,i){if(this.log.message("setWH",t,e),t&&e){var s=void 0===i?this.c:i;this.scale=window.devicePixelRatio,s.width=t*this.scale,s.height=e*this.scale,this.wide=t,this.tall=e,this.ctx&&this.ctx.scale(this.scale,this.scale),this.canvasholder.css({width:t+"px",height:e+"px"}),this.canvas.css({width:t+"px",height:e+"px"})}},g.prototype.toggleFullScreen=function(){return this.canvas.toggleFullScreen(),this},g.prototype.on=function(t,e,i){return"string"!=typeof t?this:(void 0===i?(i=e,e={}):e={data:e},"object"!=typeof e||"function"!=typeof i?this:(this.events[t]?this.events[t].push({e:e,fn:i}):this.events[t]=[{e:e,fn:i}],this))},g.prototype.trigger=function(t,e){if("string"==typeof t){"object"!=typeof e&&(e={});var i=[];if("object"==typeof this.events[t])for(var s=0;s<this.events[t].length;s++){var r=c.extend(this.events[t][s].e,e);"function"==typeof this.events[t][s].fn&&i.push(this.events[t][s].fn.call(this,r))}return i.length>0?i:void 0}},g.prototype.setOptions=function(t){var e,i,s;t=t||{},"object"!=typeof this.options&&(this.options={}),this.options.width=parseInt(u(this.canvas.container[0],"width"),10),this.options.height=parseInt(u(this.canvas.container[0],"height"),10),this.options=c.deepExtend(this.options,t),"object"!=typeof this.options.grid&&(this.options.grid={}),"boolean"!=typeof this.options.grid.show&&(this.options.grid.show=!1),"number"!=typeof this.options.grid.border&&(this.options.grid.border=1),"string"!=typeof this.options.grid.color&&(this.options.grid.color="#888888"),"object"!=typeof this.options.labels&&(this.options.labels={}),"string"!=typeof this.options.labels.color&&(this.options.labels.color="black"),"number"!=typeof this.options.padding&&(this.options.padding=0);var r={type:{type:"string",value:["utc","linear"]},label:{type:"string",value:[""]},fit:{type:"boolean",value:[!1]},padding:{type:"number",value:[0]}};for(e in s=["xaxis","yaxis"],r)if(r[e])for(i=0;i<s.length;i++)this.options[s[i]]||(this.options[s[i]]={}),typeof this.options[s[i]][e]!==r[e].type&&(this.options[s[i]][e]=r[e].value[r[e].value.length==s.length?i:0]);return"string"!=typeof this.options.zoommode&&(this.options.zoommode="both"),"boolean"!=typeof this.options.zoomable&&(this.options.zoomable=!0),this},g.prototype.addDatasets=function(t){for(var i in this.log.time("addDatasets"),this.datasets||(this.datasets={}),t)t[i]&&(this.datasets[i]||(this.datasets[i]=v(e(t[i]),this.options)));return this.log.time("addDatasets"),this},g.prototype.addMarks=function(t,e,i,s){var r,n;if(this.log.message("addMarks",e),"number"!=typeof e&&void 0===e)for(r=0;r<200;r++)void 0===this.marks[r]&&(e=r,r=100);return s.name=i.name,this.marks[e]?this.log.warning("addMarks","refusing to overwrite existing dataset at "+e,this.marks[e],t):(this.marks[e]=v(t,this.options),"boolean"!=typeof this.marks[e].show&&(this.marks[e].show=!0),"boolean"!=typeof this.marks[e].include&&(this.marks[e].include=!0),n=this.marks[e].data.length,this.marks[e].mark=new Array(n),this.marks[e].type||(this.marks[e].type="symbol"),this.marks[e].format||(this.marks[e].format={}),this.marks[e].symbol&&!this.marks[e].symbol.shape&&(this.marks[e].symbol.shape="circle"),"number"!=typeof this.marks[e].format.size&&(this.marks[e].format.size=4),this.marks[e].format.stroke||(this.marks[e].format.stroke=this.colours[0]),this.marks[e].format.strokeDash||(this.marks[e].format.strokeDash=[1,0]),"number"!=typeof this.marks[e].format.strokeWidth&&(this.marks[e].format.strokeWidth=0),this.marks[e].format.fill||(this.marks[e].format.fill=this.colours[0]),this.timeout.addMark=y({this:this,marks:this.marks[e],attr:s,i:0,total:n,original:i,update:"function"==typeof s.progress})),this},g.prototype.updateData=function(t){return this.log.message("updateData",this.marks),t&&"object"==typeof t||(t={}),t.cancelable=!1,t.update=!0,this.getGraphRange().setChartOffset().resetDataStyles().redraw(t)},g.prototype.getGraphRange=function(){var t,e,i,s,r,a,o,h,l,p;if(this.x||(this.x={}),this.y||(this.y={}),this.x=c.extend(this.x,{min:1e100,max:-1e100,log:"log"==this.options.xaxis.type,label:{text:this.options.xaxis.label},fit:this.options.xaxis.fit}),this.y=c.extend(this.y,{min:1e100,max:-1e100,log:"log"==this.options.yaxis.type,label:{text:this.options.yaxis.label},fit:this.options.yaxis.fit}),"time"!=this.options.xaxis.type&&"utc"!=this.options.xaxis.type||(this.x.isDate=!0),this.marks.length<=0)return this;function d(t,e){if(void 0===e)return t;t.min=Math.min(t.min),t.max=Math.max(t.max);for(var i=0;i<e.length;i++)void 0!==(h=e[i])&&("object"==typeof h&&(h=h.valueOf()),h<t.min&&(t.min=h),h>t.max&&(t.max=h));return t}for(o in a={xaxis:"x",yaxis:"y"})if("width"==this.options[o].range||"height"==this.options[o].range){if(l=this.options[o].domain,h=[],p={},l.field&&(p[l.field]=!0),l.fields)for(s=0;s<l.fields.length;s++)p[l.fields[s]]=!0;for(e in this.datasets)if(!l||l&&l.data==e||l.length&&2==l.length)if(l&&l.length&&2==l.length)this[a[o]].min=l[0],this[a[o]].max=l[1];else if(this.datasets[e].data)for(r=this.datasets[e].data.length,i=0;i<r;i++)if(t=this.datasets[e].data[i],this.options[o].domain)for(s in p)t[s]&&h.push(t[s]);else h.push(t[a[o]]);else this.log.message("no marks");for(e in this[a[o]]=d(this[a[o]],h),h=[],this.marks)if(!this.options[o].domain||this.options[o].domain&&this.options[o].domain.data==this.marks[e].id)if(this.marks[e].mark&&this.marks[e].include)for(r=this.marks[e].mark.length,i=0;i<r;i++)if(t=this.marks[e].mark[i].data,this.options[o].domain)for(s in p)t[s]&&h.push(t[s]);else h.push(t[a[o]]);else this.log.message("no marks");this[a[o]]=d(this[a[o]],h)}return this.x.data={min:this.x.min,max:this.x.max,range:n(this.x.max).minus(this.x.min).toValue()},this.y.data={min:this.y.min,max:this.y.max,range:n(this.y.max).minus(this.y.min).toValue()},this.defineAxis("x"),this.defineAxis("y"),this},g.prototype.panBy=function(t,e,i){if(this.stop(),this.offset.x=t,this.offset.y=e,this.log.time("panBy"),i||(i={}),i.quick){this.clear(),this.clear(this.paper.temp.ctx),this.drawAxes();var s=this.canvas.ctx;s.save(),s.beginPath(),s.rect(this.chart.left,this.chart.top,this.chart.width,this.chart.height),s.clip(),s.drawImage(this.paper.data.c,t+this.offset.dx,e+this.offset.dy,this.paper.data.width,this.paper.data.height),s.restore()}else this.redraw({update:!0});return this.log.time("panBy"),this},g.prototype.zoom=function(t,e){var i,s,r,n,a;if(this.stop(),e||(e={}),e.quick&&this.log.time("zoom"),t||(t=[]),this.coordinates&&this.coordinates.css({display:"none"}),2==t.length){if(s=r=.8,e.scale&&(s=r=e.scale),e.scalex&&(s=e.scalex),e.scaley&&(r=e.scaley),e.quick){this.paper.data.scale.x*=s,this.paper.data.scale.y*=r;var o=Math.round(this.canvas.wide/this.paper.data.scale.x),h=Math.round(this.canvas.tall/this.paper.data.scale.y);n=t[0]*(1-o/this.canvas.wide),a=t[1]*(1-h/this.canvas.tall)}i=this.pixel2data(t[0],t[1]),(t=new Array(4))[0]=i.x-s*(i.x-this.x.min),t[1]=i.x+s*(this.x.max-i.x),this.y.log?(t[2]=Math.pow(10,c.log10(i.y)-r*(c.log10(i.y)-c.log10(this.y.min))),t[3]=Math.pow(10,c.log10(i.y)+r*(c.log10(this.y.max)-c.log10(i.y)))):(t[2]=i.y-r*(i.y-this.y.min),t[3]=i.y+r*(this.y.max-i.y))}if(4==t.length&&("number"!=typeof t[0]||"number"!=typeof t[1]||"number"!=typeof t[2]||"number"!=typeof t[3]?t=[]:(this.defineAxis("x",t[0],t[1]),this.defineAxis("y",t[2],t[3]))),e.quick||0!=t.length||(this.x.min=this.x.data.min,this.x.max=this.x.data.max,this.y.min=this.y.data.min,this.y.max=this.y.data.max,this.defineAxis("x"),this.defineAxis("y")),this.setChartOffset(),e.quick){this.clear(),this.clear(this.paper.temp.ctx),this.drawAxes();var l=this.canvas.ctx;l.save(),l.beginPath(),l.rect(this.chart.left,this.chart.top,this.chart.width,this.chart.height),l.clip(),l.drawImage(this.paper.data.c,n,a,Math.round(this.canvas.wide/this.paper.data.scale.x),Math.round(this.canvas.tall/this.paper.data.scale.y)),l.restore(),this.finishDraw(!0)}else this.resetDataStyles().redraw({update:"boolean"!=typeof e.update||e.update});return e.quick&&this.log.time("zoom"),this},g.prototype.addAxisPadding=function(t,e){if(this[t].range=n(this[t].max).minus(this[t].min).toValue(),this[t].log&&(this[t].logmax=c.log10(this[t].max),this[t].logmin=this[t].min<=0?this[t].logmax-2:c.log10(this[t].min),this[t].logrange=this[t].logmax-this[t].logmin),this[t].min<1e100){var i=("x"==t?this.chart.width:this.chart.height)-2*e,s=e*this[t][(this[t].log?"log":"")+"range"]/i;this[t].log?(this[t].logmin-=s,this[t].logmax+=s,this[t].min=Math.pow(10,this[t].logmin),this[t].max=Math.pow(10,this[t].logmax)):(this[t].min-=s,this[t].max+=s),this[t].range=n(this[t].max).minus(this[t].min).toValue()}return this},g.prototype.getDataRange=function(t,e,i,s){var r=this.pixel2data(t,i),n=this.pixel2data(e,s);return[Math.min(r.x,n.x),Math.max(r.x,n.x),Math.min(r.y,n.y),Math.max(r.y,n.y)]},g.prototype.getPos=function(t,e){var i,s,r,n,a,o,h;if(this[t])return"object"==typeof e?e.scale?a=e.value:"object"==typeof e&&"Num"==e.type?a=e.toValue():(a=0,e.field&&e.field.group&&("width"==e.field.group||"height"==e.field.group)&&(a=this[t].max),0==e.value&&(a=this[t].min)):a=e,i=this[t].log?"log":"",this[t].log&&(a=c.log10(a)),s=this[t][i+"min"],r=this[t][i+"max"],n=this[t][i+"range"],o="x"==t?this.chart.left:this.chart.bottom,h="x"==t?this.chart.width:this.chart.height,"y"==t?(this.offset[t]||0)+this.options.height-(this.chart.bottom+h*((a-s)/n)):(this.offset[t]||0)+("reverse"==this[t].dir?o+h*((r-a)/n):o+h*((a-s)/n))},g.prototype.getPixPos=function(t,e){return[this.getPos("x",t),this.getPos("y",e)]},g.prototype.within=function(t,e){return t>this.chart.left&&e<this.chart.top+this.chart.height},g.prototype.pixel2data=function(t,e){return{x:t=this.x.min+(t-this.chart.left)/this.chart.width*this.x.range,y:e=this.y.log?Math.pow(10,this.y.logmin+(1-(e-this.chart.top)/this.chart.height)*this.y.logrange):this.y.min+(1-(e-this.chart.top)/this.chart.height)*this.y.range}},g.prototype.dataAtMousePosition=function(t,e){t=Math.round(t*this.canvas.scale),e=Math.round(e*this.canvas.scale);var i=[];return this.lookup&&(i=this.lookup.getValue(t,e)),i.length<1&&this.canvas.canvas.css({cursor:""}),i},g.prototype.setCanvasStyles=function(t,e){if(!e)return this;var s=e.props.format,r="string"==typeof s.fill?s.fill:"number"==typeof s.fill?this.colours[s.fill%this.colours.length]:"#000000";e.props.format.fillOpacity&&(r=i(r,s.fillOpacity)),t.fillStyle=r;var n="string"==typeof s.stroke?s.stroke:"number"==typeof s.stroke?this.colours[s.stroke%this.colours.length]:"#000000";return s.strokeOpacity&&(n=i(n,s.strokeOpacity)),t.strokeStyle=n,t.lineWidth="number"==typeof s.strokeWidth?s.strokeWidth:.8,t.lineCap=s.strokeCap||"square",t.lineJoin="bevel",t.setLineDash(s.strokeDash?s.strokeDash:[1,0]),s.fontSize&&(t.font=k(s)),s.baseline&&(t.textBaseline=s.baseline),s.align&&(t.textAlign=s.align),this},g.prototype.highlight=function(t){if(this.selecting)return this;if(!this.ready)return this;if(this.lookup&&t&&t.length>0){var i,s,r,n,a,o,h,l,c,p,d,u,f;for(this.canvas.pasteFromClipboard(),l=this.canvas.ctx,d=-1,c=Math.min(10,t.length),p=0;p<c;p++)s=(i=t[p].split(":"))[0],r=i[1],n=i[2],a=!1,o=this.marks[s].type,this.marks[s].encode.hover&&this.marks[s].interactive&&("line"!=o&&"rect"!=o&&"area"!=o&&"rule"!=o||this.marks[s].clip&&(a=!0,l.save(),l.beginPath(),l.rect(this.chart.left,this.chart.top,this.chart.width,this.chart.height),l.clip()),"line"!=o&&"symbol"!=o&&"rect"!=o&&"area"!=o&&"rule"!=o&&"text"!=o||(h="function"==typeof this.marks[s].hover?this.marks[s].hover.call(this,e(this.marks[s].mark[r]),this.marks[s].encode.hover):e(this.marks[s].mark[r]),this.setCanvasStyles(l,h),this.setCanvasStyles(this.paper.temp.ctx,h)),"line"==o&&this.drawLine(s,{ctx:l}),"symbol"==o&&this.drawShape(h,{ctx:l}),"rect"==o&&this.drawRect(h,{ctx:l}),"area"==o&&this.drawArea(s,{ctx:l}),"rule"==o&&this.drawRule(s,{ctx:l}),"text"==o&&this.drawText(h,{ctx:l}),"line"!=o&&"symbol"!=o&&"rect"!=o&&"area"!=o&&"rule"!=o&&"text"!=o||(this.setCanvasStyles(l,this.marks[s].mark[r]),this.setCanvasStyles(this.paper.temp.ctx,this.marks[s].mark[r])),a&&l.restore(),parseFloat(n)>=d&&h.props.tooltip&&(d=parseFloat(n),u=h,f=this.marks[s]));var m="graph-tooltip aas-series-"+s+" "+(this.options.tooltip&&this.options.tooltip.theme?this.options.tooltip.theme:"");this.coordinates||(this.canvas.canvasholder.append('<div class="'+m+'" style="position:absolute;display:none;"></div>'),this.coordinates=this.canvas.container.find(".graph-tooltip"));var g,v,y,x="";if(u&&({title:f.title?f.title:"",xlabel:this.x.label.text?this.x.label.text:this.x.isDate?"Time":"x",ylabel:this.y.label.text?this.y.label.text:"y",data:f.data[r]},x=b(u.props.tooltip)||""),x)this.coordinates.html(x),g=u.props.x+this.canvas.c.offsetLeft,v=u.props.y,this.coordinates.css({display:"block",left:Math.round(g)+"px",top:Math.round(v)+"px"}),y=v<this.chart.height/3?"n":v>2*this.chart.height/3?"s":"",(y+=g<this.chart.width/3?"w":g>2*this.chart.width/3?"e":"")||(y="w"),this.coordinates.attr("class",m+" graph-tooltip-"+y),this.annotated=!0;else this.coordinates.css({display:"none"});this.highlighted=c}else this.annotated&&(this.annotated=!1,this.coordinates.css({display:"none"})),this.highlighted>0&&(this.highlighted=0,this.canvas.pasteFromClipboard());return this},g.prototype.setInc=function(t,e){return"number"==typeof e?this[t].ticks.inc=n(e):("Num"!=e.type&&(e=n(e)),this[t].ticks.inc=e),this},g.prototype.defineAxis=function(t,e,i){if("string"!=typeof t||"x"!=t&&"y"!=t)return this;var s,r,a,o,h,l,p,d,u,f,m,g;if("number"==typeof i&&"number"==typeof e?(this[t].max=i,this[t].min=e):(this[t].max=this[t].data.max,this[t].min=this[t].data.min,this.addAxisPadding(t,this.options[t+"axis"].padding||0)),this[t].log&&(this[t].logmax=c.log10(this[t].max),this[t].logmin=this[t].min<=0?this[t].logmax-2:c.log10(this[t].min),this[t].logrange=this[t].logmax-this[t].logmin),this[t].range=n(this[t].max).minus(this[t].min).toValue(),this[t].ticks){for(u=0;u<this[t].ticks.length;u++)delete this[t].ticks[u];this[t].ticks.length=0}else this[t].ticks={};if(this[t].ticks.props||(this[t].ticks.props={}),this[t].log)return this[t].ticks.min=this[t].min,this[t].ticks.max=this[t].max,this.setInc(t,1),this[t].range=this[t].max-this[t].min,this[t].ticks.range=this[t].max-this[t].min,this.makeTicks(t),this;if(this[t].range<0)return this.setInc(t,0),this[t].ticks.range=0,this;if(0==this[t].range)return this[t].ticks.min=Math.ceil(this[t].max)-1,this[t].ticks.max=Math.ceil(this[t].max),this[t].min=this[t].ticks.min,this[t].max=this[t].ticks.max,this.setInc(t,1),this[t].range=this[t].max-this[t].min,this[t].ticks.range=this[t].ticks.max-this[t].ticks.min,this.makeTicks(t),this;this[t].range,f=this[t].max,m=this[t].min;var v="x"==t&&this[t].ticks.props.scale?this[t].ticks.props.scale:1;for(r=[{name:"nanoseconds",div:1e-9,spacings:[1,2,5,10,20,50,100,200,500]},{name:"microseconds",div:1e-6,spacings:[1,2,5,10,20,50,100,200,500]},{name:"milliseconds",div:.001,spacings:[1,2,5,10,20,50,100,200,500]},{name:"seconds",div:1,spacings:[1,2,5,10,15,20,30]},{name:"minutes",div:60,spacings:[1,2,5,10,15,20,30]},{name:"hours",div:3600,spacings:[1,2,4,6,12]},{name:"days",div:86400,spacings:[1,2]},{name:"weeks",div:604800,spacings:[1,2]},{name:"months",div:2592e3,spacings:[1,3,6]},{name:"years",div:31556952,spacings:[1,2,5,10,20,50,100,200,500,1e3,2e3,5e3,1e4,2e4,5e4,1e5,2e5,5e5,1e6]}],r=this[t].ticks.props.steps||r,a=1e100,l=0;l<r.length;l++)for(p=0;p<r[l].spacings.length;p++)(d=Math.ceil(n(this[t].range).times(v).div(n(r[l].div).times(r[l].spacings[p])).toValue()))<1||d>20||d>=3&&d<a&&(a=d,this[t].spacing={name:r[l].name,fract:r[l].spacings[p],scale:v,div:r[l].div});if("function"==typeof this[t].ticks.props.convert&&(m=this[t].ticks.props.convert.call(this,this[t].min,this[t].units),f=this[t].ticks.props.convert.call(this,this[t].max,this[t].units),this[t].spacing={div:w(m,f,this[t].isDate?3:5),fract:1},"function"==typeof this[t].ticks.props.spacing&&(p=this[t].ticks.props.spacing.call(this,f-m))>0&&(this[t].spacing.div=p)),this[t].isDate&&1==v)this[t].showAsDate=!0,s=n(this[t].spacing.div).times(this[t].spacing.fract),h=M(m,{range:this[t].range,unit:this[t].spacing.name,inc:s,n:this[t].spacing.fract,method:"floor"}),o=M(f,{range:this[t].range,unit:this[t].spacing.name,inc:s,n:this[t].spacing.fract,method:"ceil"});else if(this[t].isPhase)this[t].showAsDate=!1,g=(s=n(this[t].spacing.div).times(this[t].spacing.fract)).toValue(),h=n(m).div(g).floor().times(g).toValue(),o=n(f).div(g).ceil().times(g).toValue(),this[t].precisionlabel=Math.abs(Math.floor(Math.log10(g)));else if(this[t].showAsDate=!1,s=w(n(m).div(v).toValue(),n(f).div(v).toValue(),this[t].isDate?3:5),s=n(s).times(v),h=n(m).div(s).round(0,m<0?3:0).times(s).toValue(),o=n(f).div(s).round(0,f<0?0:3).times(s).toValue(),this[t].precisionlabel=Math.ceil(Math.abs(Math.log10(s.toValue()))),0==this[t].precisionlabel&&Math.abs(h)>10&&(this[t].precisionlabel=Math.floor(Math.log10(Math.abs(h)))),this[t].isDate){var y=Math.log10(s.toValue());this[t].precisionlabeldp=y<0?Math.ceil(Math.abs(Math.log10(s.toValue()))):0,this[t].precisionlabel=Math.ceil(Math.abs(Math.log10(o)-Math.log10(s.toValue())))}return this[t].ticks.min=h,this[t].ticks.max=o,this.setInc(t,s),this[t].ticks.range=this[t].ticks.max-this[t].ticks.min,this[t].precision=this[t].precisionlabel+Math.floor(Math.log10(Math.abs(v))),this.makeTicks(t),this},g.prototype.setAxisFormat=function(t,e,i){return this[t].formats=i,this[t].ticks.props=i[e],this[t].ticks.units=e,i[e].types?(this[t].isDate=!!i[e].types.absolute,this[t].isPhase=!!i[e].types.phase):(this[t].isDate=!1,this[t].isPhase=!1),this},g.prototype.makeTicks=function(t){var e,i,s,r,a,o,h,l,c,p,u;if(this.log.time("makeTicks"),(i=this[t].ticks.min)>(s=this[t].ticks.max))return this;if(isNaN(i)||isNaN(s))return this;if(i=n(i),s=n(s),this[t].log)this[t].ticks=function(t,e){var i,s,r,a,o,h,l,c,p,d,u,f,m,g;if(c={length:0,min:t,max:e},t>e)return c;for(g=Math.log10(e)-Math.log10(t),i=Math.floor(Math.log10(t)),s=Math.ceil(Math.log10(e)),m=3*Math.ceil(g/18),a=[],h=i;h<=s;h++)r=n(Math.pow(10,h)),a.push(r),r.gt(t)&&r.lt(e)&&(f=!0,g>8&&Math.log10(r.toValue())%m!=0&&(f=!1),c[""+c.length]={value:r,label:f?r.toString():"",length:1},c.length++);if(c.length<10){for(o=[],u=c.length,h=0;h<a.length;h++)for(o.push(a[h]),l=2;l<=9;l++)r=a[h].times(l),p=r.gt(t)&&r.lt(e),o.push(r),p&&(c[""+c.length]={value:r,label:u<=2?r.toString():"",length:1},c.length++);if(c.length<20)for(h=0;h<o.length;h++)for(d=n(Math.pow(10,Math.floor(Math.log10(o[h].toValue())-1))),l=1;l<=9;l++)r=o[h].plus(d.times(l)),(p=r.gt(t)&&r.lt(e))&&(c[""+c.length]={value:r,label:"",length:.5},c.length++)}return c}(i.toValue(),s.toValue());else for(this[t].ticks.length=0,p=s.plus(this[t].ticks.inc.times(.2)).toValue(),e=i,l=0;e.toValue()<=p;e=e.plus(this[t].ticks.inc),l++)this[t].showAsDate?this[t].ticks[l]={value:M(e,{range:this[t].range,unit:this[t].spacing.name,n:this[t].spacing.fract,inc:this[t].ticks.inc}),label:""}:this[t].ticks[l]={value:e,label:""},this[t].ticks.length++;if(0==this[t].ticks.length)return this.log.warning("No ticks"),this;function f(t,e){var i,s,r,a,o,h,l,c,p,u,f,m;return p="",f=(u=("number"==typeof t?n(t):t).toString()).indexOf("."),m=[n(u),n(0)],f>=0&&(p="."+u.substr(f+1,u.length-1),m=[n(u.substr(0,f)),n("0"+p)]),t=new Date(m[0].times(1e3).toValue()),e||(e={fract:1,name:"seconds"}),c=e.fract,i=d(t.getUTCHours(),2),s=d(t.getUTCMinutes(),2),r=b(d(t.getUTCSeconds()+t.getUTCMilliseconds()/1e3,2)),a=d(t.getUTCDate(),2),o=d(t.getUTCMonth()+1,2),h=t.getUTCFullYear(),"nanoseconds"==(l=e.name)||"microseconds"==l||"milliseconds"==l?r+""+p:"seconds"==l?c>=1?i+":"+s+":"+r:""+r+p:"minutes"==l?i+":"+s+(0==t.getUTCSeconds()?"":":"+r):"hours"==l?i+":"+s:"days"==l?c>=1?h+"-"+o+"-"+a:h+"-"+o+"-"+a+" "+i+":"+s:"weeks"==l?h+"-"+o+"-"+a:"months"==l?h+"-"+o:"years"==l?c>=1?""+(t.getUTCFullYear()+Math.round((t.getUTCMonth()+1)/12)):12==Math.round(t.getUTCMonth()+1)?t.getUTCFullYear()+1+"-01-01":t.getUTCFullYear()+"-"+o+"-01":i+":"+s+":"+r}i=this[t].ticks[0].value,s=this[t].ticks[this[t].ticks.length-1].value,this.sci_hi=1e4,this.sci_lo=1e-4,a=(r=Math.max(Math.abs(s),Math.abs(i)))>this.sci_hi||r<this.sci_lo,s-i<this.sci_hi&&s-i>this.sci_lo&&(a=!1),o=this[t].precision;var m=this;function g(t){var e=1e100,i="";for(var s in t)if(t[s]){try{t[s]=t[s].replace(/\.0+((e[\+\-0-9]+)?)$/,(function(t,e){return e})).replace(/^([^\.]+[\.][^1-9]*)0+$/,(function(t,e){return e})).toLocaleString()}catch(e){m.log.error(t[s],e)}"string"==typeof t[s]&&"NaN"!=t[s]||(t[s]=""),t[s].length<e&&(e=t[s].length,i=s)}return t[i]}if(this[t].log)for(l=0;l<this[t].ticks.length;l++)this[t].ticks[l].label&&(e=this[t].ticks[l].value.toValue(),a=Math.abs(e)>this.sci_hi||Math.abs(e)<this.sci_lo,h={existing:this[t].ticks[l].label},a&&(o=(""+e).length,h.normal=""+e,h.exp=x(e.toExponential())),this[t].ticks[l].label=g(h));else for(l=0;l<this[t].ticks.length;l++)e=this[t].ticks[l].value,this[t].showAsDate?(c=this[t].spacing&&"seconds"==this[t].spacing.name&&this[t].spacing.fract<.001?e.toValue().toFixed(o+3):f(e,this[t].spacing),this[t].ticks[l].label=c):(h={},o=this[t].precision,(e.gt(this.sci_hi)||e.lt(this.sci_lo))&&(o=Math.floor(Math.log10(e.abs().toValue()))-Math.floor(Math.log10(Math.abs(this[t].ticks.inc.toValue())))),this[t].isDate&&(o=1),o<1&&(o=this[t].precisionlabel),a?this[t].isDate?h.date=""+e:h.exp=e.toValue().toExponential(o):this[t].ticks.inc.toValue()>1?h.round=""+e.round(0,1).toString():h.fixed=e.toString(),Math.abs(e/this[t].range)<1e-12&&(h.fixed="0"),this[t].ticks[l].label=g(h));if(!this[t].showAsDate)for(l=0;l<this[t].ticks.length;l++)u=this[t].ticks[l].value.toValue(),this[t].ticks[l].value="number"==typeof u?u:parseFloat(this[t].ticks[l].label);if(this[t].ticks.props&&"function"==typeof this[t].ticks.props.formatLabel)for(l=0;l<this[t].ticks.length;l++){var v="",y=this[t].ticks.props.formatLabel.call(this,this[t].ticks[l].value,{i:l,axis:t,dp:this[t].precisionlabeldp,ticks:this[t].ticks,input:this[t].units||"",output:this[t].ticks.units||"",niceDate:f,spacing:this[t].spacing});y&&(v=x(y.truncated||y.str)),this[t].ticks[l].label=v}for(l=0;l<this[t].ticks.length;l++)this[t].ticks[l].label=x(this[t].ticks[l].label);if(this[t].log,this[t].ticks.min=this[t].ticks[0].value,this[t].ticks.max=this[t].ticks[this[t].ticks.length-1].value,this[t].units&&this[t].formats&&this[t].formats[this[t].units]&&"function"==typeof this[t].formats[this[t].units].convert)for(l=0;l<this[t].ticks.length;l++)this[t].ticks[l].value=n(this[t].formats[this[t].units].convert.call(this,this[t].ticks[l].value,this[t].ticks.units));return this[t].ticks.range=this[t].ticks.max-this[t].ticks.min,this.log.time("makeTicks"),this},g.prototype.scaleFont=function(t){return 0==t?this.fontscale=1:this.fontscale*=t>0?1.1:1/1.1,this.setChartOffset().resetDataStyles().redraw({update:!0}),this},g.prototype.getFontHeight=function(t,e){var i=this.chart.fontsize;return this.options[t+"axis"]&&this.options[t+"axis"][e+"FontSize"]&&(i=this.options[t+"axis"][e+"FontSize"]),i*this.fontscale},g.prototype.setChartOffset=function(){var t,i,s,r,n,a,o,h;for(n in"object"!=typeof this.chart&&(this.chart={}),t=u(this.canvas.container[0],"font-size"),i=u(this.canvas.container[0],"font-family"),s=this.options,(r=this.chart).left||(r.left=0),r.padding=this.canvas.fullscreen?36:0,r.fontsize="string"==typeof t?parseInt(t):12,r.fontfamily="string"==typeof i?i:"",h=.5*s.grid.border,r.padding=s.padding||r.padding,r.top=r.padding+h,r.left=e(r.top),r.bottom=e(r.top),r.right=e(r.top),e(r.top),a={xaxis:"bottom",yaxis:"left"})s[n]&&(s[n].title&&(o=1.5*this.getFontHeight(n.substr(0,1),"title"),this.chart[a[n]]+=o,"xaxis"==n&&o),void 0===s[n].labels&&(s[n].labels=!0),s[n].labels&&(r[a[n]]+="xaxis"==n?1.2*this.getFontHeight("x","label"):this.getLabelWidth(),4),s[n].ticks&&(o=(s[n].tickSize||4)+3,r[a[n]]+=o,"xaxis"==n&&o),r[a[n]]=Math.round(r[a[n]]));return r.width=this.canvas.wide-r.right-r.left,r.height=this.canvas.tall-r.bottom-r.top,this.chart=r,this},g.prototype.getLabelWidth=function(){var t,e,i,s,r;if(!("boolean"==typeof this.options.yaxis.labels?this.options.yaxis.labels:!(!this.options.labels||!this.options.labels.show)&&this.options.labels.show))return 0;if(t=this.getFontHeight("y","label"),s=0,(e=this.canvas.ctx).font=t+"px "+this.chart.fontfamily,this.y.ticks)for(i=0;i<this.y.ticks.length;i++)this.y.ticks[i].label&&(s=Math.max(s,e.measureText(this.y.ticks[i].label).width));return r=Math.round(1.5*t),Math.max(2*r,Math.round(Math.ceil(s/r)*r))+4},g.prototype.drawAxes=function(){var t,e,i,s,r,n,a,o,h,l,c,p,d,u,f,m,g,v,y,x,b,k,w,M,S;i=this.chart,s=this.canvas.ctx,n={xaxis:{},yaxis:{}};var j={left:{rot:r=Math.PI/2,x1:(a={xmin:this.chart.left,xmax:this.chart.left+this.chart.width,ymax:this.chart.top+this.chart.height,ymin:this.chart.top}).xmin,x2:a.xmax,textAlign:"end",textBaseline:"middle"},right:{rot:-r,x1:a.xmin,x2:a.xmax,textBaseline:"middle"},bottom:{textBaseline:"top",y1:a.ymax,y2:a.ymin}};for(l in this.subgrid||(this.subgrid=[2,3,4,5,6,7,8,9]),"string"==typeof this.background&&(s.beginPath(),s.fillStyle=this.background||"transparent",s.rect(0,0,this.canvas.wide,this.canvas.tall),s.fill(),s.closePath()),s.beginPath(),s.font=this.chart.fontsize+"px "+this.chart.fontfamily,s.textBaseline="middle",this.options.grid.border>0&&(s.strokeStyle=this.options.grid.color||"rgb(0,0,0)",s.lineWidth=this.options.grid.border,s.setLineDash([1,0])),"string"==typeof this.options.grid.background&&(s.fillStyle=this.options.grid.background,s.fillRect(i.left,i.top,i.width,i.height)),s.closePath(),n)if(n[l]){if(p="x","left"!=(c=this.options[l].orient||"left")&&"right"!=c||(p="y"),!this[p])continue;var T={grid:!1,labels:!0,ticks:!0,domain:!0};for(d in T)void 0!==T[d]&&("boolean"==typeof this.options[l][d]&&(T[d]=this.options[l][d]),this.options[d]&&this.options[d].show&&(T[d]=this.options[d].show));if(t=0,T.ticks&&(t=this.options[l].tickSize||4),T.domain&&(s.beginPath(),s.strokeStyle=this.options[l].domainColor||this.options.grid.color||"rgb(0,0,0)",s.lineWidth=this.options[l].domainWidth||this.options.grid.border,.5,"left"==c?(s.moveTo(i.left+.5,i.top),s.lineTo(i.left+.5,i.top+i.height)):"bottom"==c&&(s.moveTo(i.left,i.top+i.height+.5),s.lineTo(i.left+i.width,i.top+i.height+.5)),s.stroke(),s.closePath()),s.lineWidth=1,""!=this.options[l].title&&(u=[0,0],s.beginPath(),s.textAlign="center",s.textBaseline="bottom",f=this.getFontHeight(p,"title"),s.font=(this.options[l].titleFontWeight||"bold")+" "+f+"px "+(this.options[l].titleFont||this.chart.fontfamily),s.fillStyle=this.options[l].titleColor||this.options.labels.color,"bottom"==c?u=[i.left+i.width/2,this.options.height-Math.round(f/2)-this.chart.padding]:"left"==c&&(u=[-(i.top+i.height/2),Math.round(f/2)+this.chart.padding]),j[c]&&j[c].rot&&s.rotate(-j[c].rot),this.drawTextLabel(this.options[l].title,u[0],u[1]+f/2,{ctx:s,axis:p,format:{fontSize:f,fontWeight:this.options[l].titleFontWeight||"bold",font:this.options[l].titleFont||this.chart.fontfamily,baseline:"bottom"}}),j[c]&&j[c].rot&&s.rotate(j[c].rot),s.closePath()),s.textAlign=j[c].textAlign||"end",s.textBaseline=j[c].textBaseline||"top",p="x","left"!=(c=this.options[l].orient||"left")&&"right"!=c||(p="y"),i=this.chart,s=this.canvas.ctx,!(b=this[p]))return this;for(f=this.getFontHeight(p,"label"),s.font=f+"px "+this.chart.fontfamily,s.lineWidth=this.options.grid.width?this.options.grid.width:.5,v=a.xmin,y=a.xmax,m=a.ymax,g=a.ymin,x=0,b.precision&&(x=b.precision),b.ticks.inc&&(x=(x=""+b.ticks.inc.toValue()).length-x.indexOf(".")-1),k=0,b.ticks.min,b.ticks.max,S=0;S<b.ticks.length;S++)if(o=b.ticks[S].value,e=t*(b.ticks[S].length||1),(u=this.getPos(p,o))&&isFinite(u)&&(u=u-Math.round(u)>0?Math.floor(u)+.5:Math.ceil(u)-.5,"y"==p?(m=u,g=u):"x"==p&&(v=u,y=u),M="object"==typeof o?o.toValue():o,b.log?M:parseFloat(M.toFixed(x)),u>=a[p+"min"]&&u<a[p+"max"])){if(s.beginPath(),s.strokeStyle=this.options[l].gridColor||"rgba(0,0,0,0.5)",s.fillStyle=this.options[l].labelColor||this.options.labels.color,T.labels&&b.ticks[S].label)if("x"==p){(w=b.ticks[S].label)||(w="");var L=w.split(/\n/),D=0;for(h=0;h<L.length;h++)D=Math.max(D,s.measureText(L[h]).width);if(v+D/2<=i.left+i.width&&v>k&&v-D/2>0){for(s.textAlign="center",s.fillStyle=this.options.labels.color,h=0;h<L.length;h++)this.drawTextLabel(L[h],v,m+3+e+h*f,{ctx:s,axis:p,format:{fontSize:f,fontWeight:"normal",font:f+"px "+this.chart.fontfamily,align:"center",baseline:j[c].textBaseline||"top"}});k=v+(b.ticks.min,D)+4}}else"y"==p&&u>0&&(s.textAlign="end",u-f<0&&(s.textBaseline="top"),w=b.ticks[S].label,s.fillText(w,v-3-e,m.toFixed(1)));s.stroke(),s.strokeStyle=this.options[l].gridColor||"rgba(0,0,0,0.5)",T.grid&&b.ticks[S].label&&o>=b.min&&o<=b.max&&(s.beginPath(),s.lineWidth=this.options[l].gridWidth||.5,s.moveTo(v,m),s.lineTo(y,g),s.stroke()),s.strokeStyle=this.options[l].tickColor||"rgba(0,0,0,0.5)",T.ticks&&o>=b.min&&o<=b.max&&(s.beginPath(),s.lineWidth=this.options[l].tickWidth||.5,s.strokeStyle=this.options[l].tickColor||"rgba(0,0,0,0.5)","x"==p?(s.moveTo(v,m),s.lineTo(y,m+e)):"y"==p&&(s.moveTo(v,m),s.lineTo(v-e,g)),s.stroke(),s.closePath())}s.lineWidth=0}return this},g.prototype.resetDataStyles=function(){var t,e;for(t in this.marks)if(this.marks[t].update&&this.marks[t].show)for(e=0;e<this.marks[t].mark.length;e++)this.marks[t].mark[e]=this.marks[t].update.call(this,this.marks[t].mark[e],this.marks[t].encode.update);return this},g.prototype.stop=function(){return this.cancelredraw=!0,this.timeout.redraw&&clearTimeout(this.timeout.redraw),this},g.prototype.redraw=function(t){var i,s;for(i in this.log.message("redraw"),this.log.time("redraw"),t||(t={}),"boolean"!=typeof t.update&&(t.update=!0),"boolean"!=typeof t.cancelable&&(t.cancelable=!0),this.cancelredraw=!1,this.ready=!1,1e4,s=[],this.marks)this.marks[i]&&this.marks[i].show&&s.push({id:i,done:0});function r(t,i,n){var a,o,h,l,c,p,d,u,f,m;for(f=["x","y"],l=0;l<1e4&&i<s.length&&!t.cancelredraw;){for(a=s[i].id,h=s[i].done;h<t.marks[a].mark.length&&l<1e4;h++,l++)for((o=t.marks[a].mark[h]).id||(o.id=parseInt(a)+":"+h),m=0;m<f.length;m++)d=(p=f[m])+"1",u=p+"2",null!=o.data[p]&&(c=t.getPos(p,o.data[p]),o.props[p]=parseFloat(c.toFixed(1)),"rule"==t.marks[a].type&&!o.data[u]&&o.data[p]&&(o.data[u]=e(o.data[p])),void 0!==o.data[u]?(o.props[u]=t.getPos(p,o.data[u]),o.props[d]=c,o.props[p]=c+(o.props[u]-c)/2):void 0!==o.props[u]&&(o.props[d]=null,o.props[u]=null));s[i].done=h,s[i].done>=t.marks[a].mark.length&&i++}i>=s.length?(t.log.time("redraw"),t.draw(n.update),t.finishDraw(!0),"function"==typeof n.callback&&n.callback.call(n.self||t,{})):n.cancelable?t.timeout.redraw=setTimeout(r,0,t,i,n):r(t,i,n)}return t.cancelable?this.timeout.redraw=setTimeout(r,0,this,0,t):r(this,0,t),this},g.prototype.finishDraw=function(t){return this.offset.x=0,this.offset.y=0,this.offset.dx=0,this.offset.dy=0,t&&this.canvas.copyToClipboard(),this.ready=!0,this},g.prototype.calculateData=function(t){if(this.log.message("calculateData"),this.log.time("calculateData"),"boolean"!=typeof t&&(t=!0),!t)return this;var i,s,r,n,a,o,h,l,c;for(s in l=["x","y"],this.marks)if(this.marks[s])for(r=0;r<this.marks[s].mark.length;r++)for((i=this.marks[s].mark[r]).id||(i.id=parseInt(s)+":"+r),c=0;c<l.length;c++)o=(a=l[c])+"1",h=a+"2",null!=i.data[a]&&(n=this.getPos(a,i.data[a]),i.props[a]=parseFloat(n.toFixed(1)),"rule"==this.marks[s].type&&!i.data[h]&&i.data[a]&&(i.data[h]=e(i.data[a])),void 0!==i.data[h]?(i.props[h]=this.getPos(a,i.data[h]),i.props[o]=n,i.props[a]=n+(i.props[h]-n)/2):void 0!==i.props[h]&&(i.props[o]=null,i.props[h]=null));return this.log.time("calculateData"),this},g.prototype.drawData=function(t){var e,i,r,n,a,o,h,l;for(i in t&&(this.lookup?this.lookup.reset():this.lookup=new D(this.canvas.c.width,this.canvas.c.height)),this.clear(this.paper.data.ctx),this.paper.data.scale={x:1,y:1},this.canvas.ctx,this.marks)if(this.marks[i].show&&this.marks[i].include){if(this.log.time("drawData "+i+" "+this.marks[i].type),this.setCanvasStyles(this.paper.data.ctx,this.marks[i].mark[0]),this.setCanvasStyles(this.paper.temp.ctx,this.marks[i].mark[0]),this.marks[i].clip&&(this.paper.data.ctx.save(),this.paper.data.ctx.beginPath(),this.paper.data.ctx.rect(this.chart.left,this.chart.top,this.chart.width,this.chart.height),this.paper.data.ctx.clip()),"line"==this.marks[i].type&&this.drawLine(i,{update:!0}),"rule"==this.marks[i].type&&this.drawRule(i,{update:!0}),"area"==this.marks[i].type&&this.drawArea(i,{update:!0}),"symbol"==this.marks[i].type||"rect"==this.marks[i].type||"text"==this.marks[i].type){if(a=t&&"function"==typeof this.marks[i].hover&&this.marks[i].interactive,h=this.log.metrics["drawData "+i+" "+this.marks[i].type].av>70)for(o=this.paper.data.ctx.getImageData(0,0,1,1),l=s(this.marks[i].mark[0].props.format.fill,this.marks[i].mark[0].props.format.fillOpacity),r=0;r<4;r+=4)o.data[r+0]=l.r,o.data[r+1]=l.g,o.data[r+2]=l.b,o.data[r+3]=255*l.a;for(r=0;r<this.marks[i].mark.length;r++)(e=(n=this.marks[i].mark[r]).props).x&&e.y&&("symbol"==this.marks[i].type?h?e.x>=this.chart.left&&e.x<=this.chart.left+this.chart.width&&e.y>=this.chart.top&&e.y<=this.chart.top+this.chart.height&&this.paper.data.ctx.putImageData(o,e.x*this.canvas.scale,e.y*this.canvas.scale):this.drawShape(n,{update:a}):"rect"==this.marks[i].type?this.drawRect(n,{update:a}):"text"==this.marks[i].type&&this.drawText(n,{update:a}))}this.log.time("drawData "+i+" "+this.marks[i].type),this.marks[i].clip&&this.paper.data.ctx.restore()}try{this.canvas.ctx.drawImage(this.paper.data.c,0,0,this.paper.data.width,this.paper.data.height)}catch(t){}return this},g.prototype.remove=function(){return this.canvas.canvasholder.remove(),{}},g.prototype.drawRect=function(t,e){var i,s,r,n,a,o,h,l,c,d,u,f;return c="number",l=e.ctx||this.paper.data.ctx,p(e.x,c)&&(t.props.x=e.x),p(e.y,c)&&(t.props.y=e.y),p(e.x1,c)&&(t.props.x1=e.x1),p(e.y1,c)&&(t.props.y1=e.y1),p(e.x2,c)&&(t.props.x2=e.x2),p(e.y2,c)&&(t.props.y2=e.y2),p(t.props.x2,c)||p(t.props.y2,c)?(i=p(t.props.x1,c)?t.props.x1:t.props.x,s=p(t.props.y1,c)?t.props.y1:t.props.y,a=(r=p(t.props.x2,c)?t.props.x2:i)-i,o=(n=p(t.props.y2,c)?t.props.y2:s)-s,t.props.format.width&&(i+=(a-t.props.format.width)/2,a=t.props.format.width),t.props.format.height&&(s+=(o-t.props.format.height)/2,o=t.props.format.height),0,d=this.canvas.wide,0,u=this.canvas.tall,f=!1,(r>=0&&i<=d||s>=u&&n<=0||t.props.x+a>0&&t.props.x-a<d||t.props.y+o>0&&t.props.y-o<u)&&(f=!0),f?(l.beginPath(),l.rect(i,s,a,o),l.fill(),l.closePath(),h={id:t.id,xa:Math.floor(i-a/2),xb:Math.ceil(i+a/2),ya:Math.floor(n),yb:Math.ceil(s),w:1},e.update&&this.addRectToLookup(h),h):{}):""},g.prototype.drawRule=function(t,e){var i,s,r;for(e||(e={}),i=e.ctx||this.paper.data.ctx,this.clear(this.paper.temp.ctx),this.paper.temp.ctx.beginPath(),s=0;s<this.marks[t].mark.length;s++)r=this.marks[t].mark[s].props,this.marks[t].mark[s].data.x&&(this.marks[t].mark[s].data.x.scale||(0==this.marks[t].mark[s].data.x.value&&(r.x1=this.chart.left),this.marks[t].mark[s].data.x2.field&&"width"==this.marks[t].mark[s].data.x2.field.group&&(r.x2=this.chart.width+this.chart.left))),this.marks[t].mark[s].data.y&&(this.marks[t].mark[s].data.y.scale||(0==this.marks[t].mark[s].data.y.value&&(r.y1=this.chart.top),this.marks[t].mark[s].data.y2.field&&"height"==this.marks[t].mark[s].data.y2.field.group&&(r.y2=this.chart.height+this.chart.top))),isNaN(r.x)&&(r.x1=this.chart.left,r.x2=this.chart.width+this.chart.left),isNaN(r.y)&&(r.y1=this.chart.top,r.y2=this.chart.height+this.chart.top),r.x1||(r.x1=r.x),r.x2||(r.x2=r.x),r.y1||(r.y1=r.y),r.y2||(r.y2=r.y),r.x1&&r.y1&&this.paper.temp.ctx.moveTo(r.x1,r.y1),r.x2&&r.y2&&this.paper.temp.ctx.lineTo(r.x2,r.y2),!e.update||r.x1!=r.x2&&r.y1!=r.y2||this.lookup.setRect(r.x1,r.y1,r.x2,r.y2,t,s,.6);return this.paper.temp.ctx.stroke(),i.drawImage(this.paper.temp.c,0,0,this.paper.temp.width,this.paper.temp.height),this},g.prototype.drawVisibleLineSegment=function(t,e,i,s){return t<0&&i<0||t>this.canvas.wide&&i>this.canvas.wide||e<0&&s<0||e>this.canvas.tall&&s>this.canvas.tall?0:(t<0&&(e+=(s-e)*(Math.abs(t)/(i-t)),t=0),i>this.canvas.wide&&(s=e+(s-e)*((this.canvas.wide-t)/(i-t)),i=this.canvas.wide),e<0&&(t+=(i-t)*(Math.abs(e)/(s-e)),e=0),s>this.canvas.tall&&(i=t+(i-t)*((this.canvas.tall-e)/(s-e)),s=this.canvas.tall),this.paper.temp.ctx.moveTo(t,e),this.paper.temp.ctx.lineTo(i,s),1)},g.prototype.drawLine=function(t,e){var i,s,r,n,a;for(i=e.ctx||this.paper.data.ctx,this.clear(this.paper.temp.ctx),this.paper.temp.ctx.beginPath(),r=(s=this.marks[t].mark)[0].props,this.paper.temp.ctx.moveTo(r.x,r.y),n=1;n<s.length;n++)a=s[n].props,isNaN(r.x)||isNaN(a.x)||this.paper.temp.ctx.lineTo(a.x,a.y),r=a;return this.paper.temp.ctx.stroke(),i.drawImage(this.paper.temp.c,0,0,this.paper.temp.width,this.paper.temp.height),e.update&&this.addTempToLookup({layer:t,id:0,weight:.6}),this},g.prototype.drawArea=function(t,e){var i,s,r,n,a,o,h,l,c;for(i=e.ctx||this.paper.data.ctx,this.clear(this.paper.temp.ctx),this.paper.temp.ctx.beginPath(),{},s=[],n=0,r=0;n<this.marks[t].mark.length;n++)l=(h=this.marks[t].mark[n].props).y1||h.y,c=h.y2,isNaN(h.x)||isNaN(l)||isNaN(c)?r++:(s[r]||(s[r]=[]),s[r].push(n));var p=new Array(s.length);for(r=0;r<s.length;r++)if(s[r]&&s[r].length){for(p[r]=new Array(2*s[r].length),o=0,a=0;a<s[r].length;a++,o++)h=this.marks[t].mark[s[r][a]].props,p[r][o]=[h.x,h.y2];for(a=s[r].length-1;a>=0;a--,o++)(h=this.marks[t].mark[s[r][a]].props).y1=h.y1||h.y,p[r][o]=[h.x,h.y1]}for(r=0;r<p.length;r++)if(p[r])for(a=0;a<p[r].length;a++)0==a?this.paper.temp.ctx.moveTo(p[r][a][0],p[r][a][1]):this.paper.temp.ctx.lineTo(p[r][a][0],p[r][a][1]);return this.paper.temp.ctx.fill(),this.marks[t].mark[0].props.format.strokeWidth>0&&this.paper.temp.ctx.stroke(),i.drawImage(this.paper.temp.c,0,0,this.paper.temp.width,this.paper.temp.height),e.update&&this.addTempToLookup({layer:t,id:0,weight:.4}),this},g.prototype.drawText=function(t,e){var i,s,r,n,a,o;return i=e.ctx||this.paper.data.ctx,a=e.x||t.props.x,o=e.y||t.props.y,s=e.text||t.data.text||"Label",r=JSON.parse(JSON.stringify(t.props.format)),e.props&&r.extend(e.props),(n=this.drawTextLabel(s,a,o,{ctx:i,format:r})).id=t.id,n.weight=1,e.update&&this.addRectToLookup(n),n},g.prototype.drawTextLabel=function(t,e,i,s){var r,n,a,o,h,l,c,p,d;for(s||(s={}),p=s.ctx||this.canvas.ctx,(h=s.format||{}).font||(h.font=this.chart.fontfamily),h.fontSize||(h.fontSize=this.chart.fontsize*this.fontscale),h.fontWeight||(h.fontWeight="bold"),h.align||(h.align="center"),h.baseline||(h.baseline="middle"),t||(t=""),"object"==typeof t&&t.value&&(t=t.value),o=("string"==typeof t?"NORMAL==="+t.replace(/([\^\_])\{([^\}]*)\}/g,(function(t,e,i){return"%%"+("^"==e?"SUP":"SUB")+"==="+i+"%%NORMAL==="})):"").replace(/%%NORMAL===$/,"").split(/%%/),r=0,n=0;n<o.length;n++)o[n]=o[n].split("==="),h.fontSize&&h.font&&(l=("NORMAL"==o[n][0]?1:.8)*h.fontSize,p.font=k(h)),r+=p.measureText(o[n][1]).width;var u=e+(h.dx||0);for("center"==h.align&&(u-=r/2),"right"==h.align&&(u-=r),p.textAlign="left",p.textBaseline=h.baseline,n=0,a=u;n<o.length;n++)l=(c="NORMAL"==o[n][0]?1:.6)*h.fontSize,d=0,"SUP"==o[n][0]&&(d=-(1-c)*h.fontSize),"SUB"==o[n][0]&&(d=(1-c)*h.fontSize),p.font=h.fontWeight+" "+Math.round(l)+"px "+h.font,p.fillText(o[n][1],a,i+d),a+=p.measureText(o[n][1]).width;return{xa:Math.floor(u),xb:Math.ceil(a),ya:Math.floor(i),yb:Math.ceil(i+h.fontSize)}},g.prototype.drawShape=function(t,e){var i,s,r,n,a,o,h,l,c,p;e.ctx||(e.ctx=this.paper.data.ctx),i=e.ctx,s=t.props,r="number"==typeof e.x?e.x:s.x,n="number"==typeof e.y?e.y:s.y,i.moveTo(r,n),i.beginPath();var d=s.symbol.shape;if(o=a=h=Math.sqrt(s.format.size)||4,r+(p=2*a)<0||r-p>this.chart.left+this.chart.width||n+p<0||n-p>this.chart.top+this.chart.height)return{};function u(t,e){i.moveTo(r+t,n+e)}function f(t,e){i.lineTo(r+t,n+e)}return"circle"==d?i.arc(r,n,a/2||4,0,2*Math.PI,!1):"rect"==d?(o=s.format.width||a,h=s.format.height||o,s.x2?o=s.x2-s.x1:s.width&&s.x?(o=s.width,r=s.x-s.width/2):s.width&&s.xc?(o=s.width,r=s.xc-s.width/2):r-=o/2,s.y2?h=s.y2-s.y1:s.height&&s.y?(h=s.height,n=s.y-s.height/2):s.height&&s.yc?(h=s.height,n=s.yc-s.height/2):n-=h/2,i.rect(r,n,o,h)):"cross"==d?(u(c=o/6,c),f(3*c,c),f(3*c,-c),f(c,-c),f(c,3*-c),f(-c,3*-c),f(-c,-c),f(3*-c,-c),f(3*-c,c),f(-c,c),f(-c,3*c),f(c,3*c)):"diamond"==d?(u(0,o*=Math.sqrt(2)/2),f(o,0),f(0,-o),f(-o,0)):"triangle-up"==d?(u(0,1.5*-(o/=3)),f(2*o,1.5*o),f(2*-o,1.5*o)):"triangle-down"==d?(u(0,1.5*(o/=3)),f(2*o,1.5*-o),f(2*-o,1.5*-o)):"triangle-left"==d?(u(1.5*(o/=3),1.5*o),f(1.5*o,1.5*-o),f(1.5*-o,0)):"triangle-right"==d&&(u(1.5*-(o/=3),1.5*o),f(1.5*-o,1.5*-o),f(1.5*o,0)),i.fill(),s.format.strokeWidth>0&&i.stroke(),l={id:t.id,xa:Math.floor(r-o/2),xb:Math.ceil(r+o/2),ya:Math.floor(n-h/2),yb:Math.ceil(n+h/2)},e.update&&this.addRectToLookup(l),l},g.prototype.addTempToLookup=function(t){if("number"==typeof t.id){var e,i,s,r,n,a,o;for(a=this.canvas.c.width,o=this.canvas.c.height,n=(e=this.paper.temp.ctx.getImageData(0,0,a,o)).data.length,i=s=r=0;i<n;i+=4,s++)s==a&&(s=0,r++),(e.data[i]||e.data[i+1]||e.data[i+2]||e.data[i+3])&&this.lookup.setValue(s,r,t.layer,t.id,t.weight);return this}},g.prototype.addRectToLookup=function(t){if(t.id){var e,i,s,r,n;for(r in 1,t.xb<t.xa&&(s=t.xa,t.xa=t.xb,t.xb=s),t.yb<t.ya&&(s=t.ya,t.ya=t.yb,t.yb=s),{x:"",y:""})if(r)for(n in{a:"",b:""})n&&(t[r+""+n]*=this.canvas.scale,t[r+""+n]="a"==n?Math.floor(t[r+""+n]):Math.ceil(t[r+""+n]));if(t.xb+=2,t.xb=Math.min(t.xb,this.canvas.c.width-1),t.ya-=1,t.yb+=1,t.xa<0&&(t.xa=0),t.ya<0&&(t.ya=0),t.yb=Math.min(t.yb,(this.chart.top+this.chart.height)*this.canvas.scale),!t.layer){var a=t.id.split(":");t.layer=a[0],t.id=parseInt(a[1])}for(e=t.xa;e<t.xb;e++)for(i=t.ya;i<t.yb;i++)this.lookup.setValue(e,i,t.layer,t.id,t.weight);return this}},g.prototype.clear=function(t){var e,i;return e=t?t.canvas.width:this.canvas.wide,i=t?t.canvas.height:this.canvas.tall,(t=t||this.canvas.ctx).clearRect(0,0,e,i),this},g.prototype.draw=function(t){return this.log.time("draw"),this.clear(),this.drawAxes(),this.drawData(t),this.finishDraw(t),this.log.time("draw"),this};var j=0;function T(t){(t=t||window.event).preventDefault&&t.preventDefault(),t.returnValue=!1}function L(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",T,!1),window.onmousewheel=document.onmousewheel=null,window.onwheel=null,window.ontouchmove=null,j>0&&S("body").css({overflow:"","margin-right":""})}function D(t,e){return this.width=t,this.height=e,this.layers={},this.log=new N({id:"Lookup",logging:!0,logtime:!0}),this}function N(t){return t||(t={}),this.logging=t.logging||!1,this.logtime=t.logtime||!1,this.id=t.id||"JS",this.metrics={},this.error=function(){this.log("ERROR",arguments)},this.warning=function(){this.log("WARNING",arguments)},this.info=function(){this.log("INFO",arguments)},this.message=function(){this.log("MESSAGE",arguments)},this}D.prototype.reset=function(){return this.layers={},this},D.prototype.setValue=function(t,e,i,s,r){var n,a;return r||(r=1),n=this.width*this.height,this.layers[i]||(this.layers[i]={id:new Int8Array(n),weight:new Float64Array(n)}),this.layers[i]&&(a=t+e*this.width,this.layers[i].id[a]=s+1,this.layers[i].weight[a]=r),this},D.prototype.setRect=function(t,e,i,s,r,n,a){var o,h,l,c;if(a||(a=1),o=this.width*this.height,this.layers[r]||(this.layers[r]={id:new Int8Array(o),weight:new Float64Array(o)}),this.layers[r])for(t=Math.floor(t),i=Math.ceil(i),h=t;h<=i;h++)for(l=e;l<=s;l++)c=h+l*this.width,this.layers[r].id[c]=n+1,this.layers[r].weight[c]=a;return this},D.prototype.getValue=function(t,e){var i,s,r;if(t<0||e<0||t>this.width||e>this.height)return[];for(r in i=[],s=t+e*this.width,this.layers)this.layers[r]&&this.layers[r].id[s]>0&&i.push(r+":"+(this.layers[r].id[s]-1)+":"+this.layers[r].weight[s]);return i},N.prototype.log=function(){var t,e,i;(this.logging||"ERROR"==arguments[0]||"WARNING"==arguments[0]||"INFO"==arguments[0])&&(1==(e=(t=Array.prototype.slice.call(arguments[1],0)).length>1?t.splice(1):"").length&&(e=e[0]),i="font-weight:bold;",console&&"function"==typeof console.log&&("ERROR"==arguments[0]?console.error("%c"+this.id+"%c: "+t[0],i,"",e):"WARNING"==arguments[0]?console.warn("%c"+this.id+"%c: "+t[0],i,"",e):"INFO"==arguments[0]?console.info("%c"+this.id+"%c: "+t[0],i,"",e):console.log("%c"+this.id+"%c: "+t[0],i,"",e)));return this},N.prototype.time=function(t){if(this.metrics[t]||(this.metrics[t]={times:[],start:""}),this.metrics[t].start){var e,i,s,r,n,a,o;if(e=new Date-this.metrics[t].start,i=[1,.75,.55,.4,.28,.18,.1,.05,.002],(o=this.metrics[t].times).unshift(e),o.length>i.length-1&&(o=o.slice(0,i.length)),n=o.length,this.metrics[t].av=0,n>0){for(a=0,s=0,r=0;a<n;a++)s+=o[a]*i[a],r+=i[a];this.metrics[t].av=s/r}this.metrics[t].times=o.splice(0),this.logtime&&this.info(t+" "+e+"ms ("+this.metrics[t].av.toFixed(1)+"ms av)"),delete this.metrics[t].start}else this.metrics[t].start=new Date;return this},t.Graph=g,t.Logger=N}(window||this)},function(t,e){!function(t){function e(t,e){for(var i in e||(e={}),this.attr=e,"object"==typeof t?(this.json=t,this.vega=JSON.parse(JSON.stringify(t))):"string"==typeof t&&(this.file=t),this.log=new Logger({logging:e.logging||!1,logtime:e.logtime||!1,id:"TS"}),void 0===e.showaswego&&(e.showaswego=!1),this.log.message("TS",t),this.progress={datasets:{old:"",used:""},update:{todo:0,done:0}},this.options={xaxis:{title:"Time",log:!1,fit:!0},yaxis:{title:"y-axis",log:!1},grid:{hoverable:!0,clickable:!0,color:"#888888"},labels:{color:"#000000"},fit:!1,tooltip:{theme:"aas-theme"},showaswego:e.showaswego},this.xformats={auto:{title:"Auto",types:{absolute:!0,relative:!0},scale:1,formatLabel:function(t,e){var i="seconds"==e.input||""==e.input?t:h(t,e.input,"seconds");return{str:e.niceDate(i,e.spacing)}}},locale:{title:"Locale",scale:1,types:{absolute:!0},formatLabel:function(t,e){return{str:new Date(h(t,e.input,"unix")).toLocaleString()}}},iso:{title:"ISO8601",scale:1,types:{absolute:!0},formatLabel:function(t,e){var i={str:"?"},s=h(t,e.input,e.output);return"days"==e.spacing.name&&(s=s.replace(/^([0-9]{4}-[0-9]{2}-[0-9]{2}).*/,(function(t,e){return e}))),i.str=s.replace(/\.0+Z/,"Z"),i}},jd:{title:"Julian date",scale:86400,types:{absolute:!0},formatLabel:function(t,e){return{str:h(t,e.input,e.output)+""}}},mjd:{title:"Modified Julian date",scale:86400,types:{absolute:!0},formatLabel:function(t,e){return{str:h(t,e.input,e.output)+""}}},tjd:{title:"Truncated Julian date",scale:86400,types:{absolute:!0},formatLabel:function(t,e){return{str:h(t,e.input,e.output)+""}}},relative:{title:"Relative date",types:{relative:!0},scale:1,convert:function(t,e){return"hours"==e?Num(t).times(3600).toValue():t},formatLabel:function(t,e){var i,s,r,a,o,h,l,c,p,d,u,f;if(0==t)return{str:"0"};if("string"!=(i=typeof t)&&"number"!=i||(t=Num(t)),null==t)return{str:""};for(s=t.gte(0)?1:-1,r=t.abs(),a=t.abs(),"function"==typeof(f=e?Math.abs(e.ticks[e.ticks.length-1].value):a).toValue&&(f=f.toValue()),d=["y","d","h","m","s"],o={y:31557600,d:86400,h:3600,m:60,s:1},h="",u={},l=0;l<d.length;l++)p=o[c=d[l]],u[c]=Number(a.div(p).round(0,0)),a=a.minus(u[c]*p);return a.gt(0)&&(u.f=a.toString(),u.f=u.f.substr(u.f.indexOf("."))),h="",u.y>0&&(h=u.y+"y"),u.d>0&&(h+=(h?" ":"")+u.d+"d"),f>o.h&&(h+=(h?" ":"")+n(u.h,2)+":"),f>o.m&&(h+=""+n(u.m,2)),(u.s>0||u.f)&&(h+=(f>o.m||f>o.h||r.gt(o.d)?":":"")+(f>o.s?n(u.s,2):u.s)),u.f&&(h+=u.f),{str:(s<0?"-":"")+h}}},seconds:{title:"Seconds",types:{relative:!0},convert:function(t,e){return"hours"==e?Num(t).times(3600).toValue():"days"==e?Num(t).times(86400).toValue():"years"==e?Num(t).times(31557600).toValue():t}},hours:{title:"Hours",types:{relative:!0},convert:function(t,e){return"seconds"==e||"relative"==e?Num(t).div(3600).toValue():"days"==e?Num(t).times(24).toValue():"years"==e?Num(t).times(8766).toValue():t}},days:{title:"Days",types:{relative:!0},convert:function(t,e){return"seconds"==e||"relative"==e?Num(t).div(86400).toValue():"hours"==e?Num(t).div(24).toValue():"years"==e?Num(t).times(365.25).toValue():t}},years:{title:"Years",types:{relative:!0},convert:function(t,e){return"seconds"==e||"relative"==e?Num(t).div(31557600).toValue():"hours"==e?Num(t).div(8766).toValue():"days"==e?Num(t).div(365.25).toValue():t}},unity:{title:"Phase (unity)",types:{phase:!0},convert:function(t,e){return"degrees"==e?Num(t).div(360).toValue():"radians"==e?Num(t).div(2).toValue():t},formatLabel:function(t,e){return{str:t.toString()}}},degrees:{title:"Phase (degrees)",types:{phase:!0},convert:function(t,e){return"unity"==e?t=Num(t).times(360).toValue():"radians"==e&&(t=Num(t).times(180).toValue()),t},spacing:function(t){return t>300?90:t>200?60:t>100?30:0},formatLabel:function(t,e){return{str:t.toString()+"°"}}},radians:{title:"Phase (radians)",types:{phase:!0},convert:function(t,e){return"unity"==e?Num(t).times(2).toValue():"degrees"==e?Num(t).div(180).toValue():t},formatLabel:function(t,e){return{str:t.toString()+"π"}}}},this.datasets=[],this.directory="",e)e[i]&&("directory"==i&&(this[i]=e[i]),"fit"!=i&&"tooltip"!=i||(this.options[i]=e[i]));return this.json&&this.processJSON(t),this}function i(t,e,i,r){var n="",a=!0;if(r||(r={}),r.this=t,i.from&&i.from.data&&(void 0===t.datasets[i.from.data]&&(t.log.error("Data source "+i.from.data+" doesn't seem to exist."),a=!1),n=i.from.data,t.datasets[n]&&(t.progress.datasets.used+=n)),(!n||t.datasets[n]||!a)&&!t.graph.marks[e]){var h=i.description||"Markers "+(e+1),l={title:n,id:n,name:i.name||"",desc:h,type:i.type,interactive:"boolean"==typeof i.interactive&&i.interactive,css:{"background-color":"#000000"},include:"boolean"!=typeof i.include||i.include};"symbol"==i.type?l.symbol={show:!0}:"rect"==i.type?l.rect={show:!0}:"line"==i.type?l.lines={show:!0}:"rule"==i.type?l.rule={show:!0}:"area"==i.type?l.area={show:!0}:"text"==i.type&&(l.text={show:!0}),t.datasets[n]?(l.data=o(t.datasets[n].json),l.original=o(t.datasets[n].json),l.parse=t.datasets[n].parse):(n&&!t.datasets[n]&&t.log.error("No dataset for "+i.name),l.data=[{props:{x:0,y:0,x2:0,y2:0}}],l.original={},l.parse={}),l?(i.encode&&i.encode.hover&&(l.hoverable=!0),l.encode=i.encode,i.encode.update&&(l.interactive=!0),i.encode.enter&&(l.enter=function(t,e){return s(this,t,e)}),i.encode.update&&(l.update=function(t,e){return s(this,t,e)}),i.encode.hover&&(l.hover=function(t,e){return s(this,t,e)}),l.clip=i.clip||!1,t.graph.addMarks(l,e,i,r),t.datasets[n]&&(t.datasets[n].added=!0)):t.log.message("No dataset built for "+n,i)}return t}function s(t,e,i){var s,r,n,h,l,c={size:"props",shape:"props",fill:"props",fillOpacity:"props",stroke:"props",strokeOpacity:"props",strokeWidth:"props",strokeCap:"props",strokeDash:"props",width:"props",height:"props",tooltip:"props",font:"props",fontSize:"props",fontWeight:"props",fontStyle:"props",baseline:"props",align:"props",dx:"props",angle:"props",limit:"props"};if(!e)return t.log.warning("updateProps fail",e,i);for(h in i)if(i[h]&&(c[h]&&"props"==c[h]?void 0!==i[h].value&&(e.props.symbol&&(e.props.symbol[h]=i[h].value),e.props.format&&(e.props.format[h]=i[h].value)):(void 0===e.data[h]&&(e.data[h]=o(i[h])),i[h].field&&("string"==typeof i[h].field?void 0!==e.data[i[h].field]?e.data[h]=e.data[i[h].field]:t.log.error('The field "'+i[h].field+'" ('+h+"-axis) seems to be missing.",o(e),i):"object"==typeof i[h].field&&(e.data[h]=o(i[h]))),void 0!==i[h].value&&(i[h].format&&"date"==i[h].format?e.data[h].value=new Date(i[h].value).getTime()/1e3:e.data[h].value=i[h].value)),i[h].signal)){"datum"==(l=o(i[h].signal))&&(l=JSON.stringify(e.original)),void 0===e[s=c[h]||"data"][h]&&(e[s][h]={});try{e[s][h].value=a(l,e.data)}catch(i){t.log.error("Unable to parse signal",e.data,e.data,l)}if("tooltip"==h)if("object"==typeof e.props[h].value){for(n in r="<table>",e.props[h].value)void 0!==e.props[h].value[n]&&(r+="<tr><td>"+n+":</td><td>"+e.props[h].value[n]+"</td></tr>");e.props[h]=r+"</table>"}else e.props[h]=e.props[h].value}return e}function r(t,e){return'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">'+({menu:'<path style="fill:%COLOUR%;fill-opacity: 0.8;" d="M 5,6 l 22,0 0,4 -22,0 0,-4 M 5,14 l 22,0 0,4 -22,0 0,-4 M 5,22 l 22,0 0,4 -22,0 0,-4 " />',fit:'<path style="fill:%COLOUR%" d="M 0,12 L0,0 12,0 12,4 6,4 12,10 10,12 4,6 4,12 M20,0 L 32,0 32,12 28,12 28,6 22,12 20,10 26,4 20,4 20,0 M 20,32 L20,28 26,28 20,22 22,20 28,26 28,20 32,20, 32,32 20,32 M 12,32 L 0,32 0,20 4,20 4,26 10,20 12,22 6,28 12,28 12,32" />',layers:'<path style="fill:%COLOUR%;fill-opacity:0.8;" d="M 16,6 l 12,6.5 -12,6.5 -12,-6.5Z" /><path style="fill:%COLOUR%;fill-opacity:0.8;" d="M 16,10.5 l 12,6.5 -12,6.5 -12,-6.5 Z" /><path style="fill:%COLOUR%;fill-opacity:0.8;" d="M 16,15 l 12,6.5 -12,6.5 -12,-6.5 Z" />',views:'<path style="fill:%COLOUR%;fill-opacity:0.8;" d="M 5,5 l 10,0 0,10 -10,0 0,-2 4,0 0,-2.5 2,0 0,2.5 1,0 0,-5 -1,-1 -2,0 -1,1 3,0 0,1.5 -2,0 0,-1.5 -1,0 0,5 -3,0Z M 17,5 l 10,0 0,10 -10,0 0,-2 6,0 1,-1 0,-1 -1,-1 1,-1 0,-1 -1,-1 -2,0 0,1 2,0 0,1 -0.5,0.5 -1.5,0 0,1 1.5,0 0.5,0.5 0,1 -2,0 0,-5 -1,0 0,6 -3,0Z M 5,17 l 10,0 0,10 -10,0 0,-2 4,0 3,0 0,-1 -3,0 0,-4 3,0 0,-1 -3,0 -1,1 0,4 1,1 -4,0Z M 17,17 l 10,0 0,10 -10,0 0,-2 6,0 1,-1 0,-4 -1,-1 -3,0 0,1 3,0 0,4 -2,0 0,-4 -1,0 0,5 -3,0Z" />',config:'<path style="fill:%COLOUR%;fill-opacity:0.8;" d="M 13.971 4.5996 L 13.377 7.6992 L 13.453 7.6992 A 8.661 8.661 0 0 0 12.008 8.291 L 9.4785 6.5 L 6.5781 9.4004 L 8.3926 11.865 A 8.661 8.661 0 0 0 7.707 13.551 L 7.707 13.4 L 4.6074 13.9 L 4.6074 18 L 7.707 18.5 L 7.707 18.361 A 8.661 8.661 0 0 0 8.3945 20.033 L 6.5781 22.5 L 9.4785 25.4 L 12.01 23.609 A 8.661 8.661 0 0 0 13.395 24.189 L 13.971 27.199 L 18.033 27.199 L 18.547 24.215 A 8.661 8.661 0 0 0 20.014 23.621 L 22.529 25.4 L 25.43 22.5 L 23.635 20.059 A 8.661 8.661 0 0 0 24.289 18.496 L 27.369 18 L 27.369 13.9 L 24.283 13.402 A 8.661 8.661 0 0 0 23.631 11.848 L 25.43 9.4004 L 22.529 6.5 L 20.01 8.2832 A 8.661 8.661 0 0 0 18.564 7.6836 L 18.033 4.5996 L 13.971 4.5996 z M 15.988 10.828 A 5.0719 5.0719 0 0 1 21.061 15.9 A 5.0719 5.0719 0 0 1 15.988 20.973 A 5.0719 5.0719 0 0 1 10.916 15.9 A 5.0719 5.0719 0 0 1 15.988 10.828 z" />',save:'<path style="fill:%COLOUR%;fill-opacity:0.8;" d="M 6,26 l 20,0 0,-6 -6,0 -4,3 -4,-3 -6,0 Z M 16,20 l 8,-8 -5,0 0,-6 -6,0 0,6 -5,0" />',about:'<path style="fill:%COLOUR%;fill-opacity:0.8;" d="M 16,24 m -3,0 c 0,-4 6,-4 6,0 c 0,4 -6,4 -6,0 Z M 13,19 l 6,0 0,-4 c 6,0 6,-11 -3,-11 c -3,0 -8,2 -8,8 l 4,0 c 2,-10 11,0 2,2Z" />'}[t]||"").replace(/%COLOUR%/g,e||"black")+"</svg>"}function n(t,e){for(e||(e=2),t+="";t.length<e;)t="0"+t;return t}TimeSeries=new function(){this.version="0.0.24",this.length=0,this.create=function(t,i){return i||(i={}),"boolean"!=typeof i.logging&&(i.logging=this.log.logging),"boolean"!=typeof i.logtime&&(i.logtime=this.log.logtime),i.index=this.length,this.length++,new e(t,i)},this.load={resources:{files:{},callbacks:[]},data:{files:{},callbacks:[]}},this.callback="",this.scroll={},this.log=new Logger({id:"TimeSeries",logging:location.search.indexOf("logging=true")>0,logtime:location.search.indexOf("logtime=true")>0});var t=document.getElementsByTagName("script"),i=t[t.length-1].src.split("?")[0],s=i.lastIndexOf("/");return s>=0?i.substr(0,s+1):"",console&&console.log("%ctimeseries.js v"+this.version+"%c","font-weight:bold;font-size:1.25em;",""),this.loadFromDataFile=function(t,e,i){this.log.message("loadFromDataFile",t,e,i),e.file=t,this.load.data.files[t]?this.load.data.files[t].loaded?"function"==typeof i&&i.call(e.this,this.load.data.files[t].data,e):this.load.data.files[t].callbacks.push({fn:i,attr:e}):(this.log.time("loadFromDataFile "+t),this.load.data.files[t]={loaded:!1,callbacks:[]},this.load.counter||(this.load.counter=0),this.load.data.files[t].name||(this.load.data.files[t].id="file-"+this.load.counter++),this.load.data.files[t].callbacks.push({fn:i,attr:e}),this.log.message("loading data",t),e.this.updateMessage("main"+this.load.data.files[t].id,"Loading "+e.dataset.name+"..."),S().ajax(t,{dataType:"text",this:this,master:e.this,file:t,id:this.load.data.files[t].id,success:function(t,e){t=t.replace(/[\n\r]$/,""),e.master.updateMessage("main"+e.id,"");for(var i=this.load.data.files[e.file].callbacks,s=0;s<i.length;s++)this.load.data.files[i[s].attr.file].data=t,this.load.data.files[i[s].attr.file].loaded=!0,"function"==typeof i[s].fn&&i[s].fn.call(i[s].attr.this,this.load.data.files[i[s].attr.file].data,i[s].attr);this.log.message("loaded from data file "+e.file),this.log.time("loadFromDataFile "+e.file)},error:function(t,e){for(var i=this.load.data.files[e.file].callbacks,s=0;s<i.length;s++)i[s].attr.this.error("Failed to load",e.file,t)}}))},S(document).on("scroll",{me:this},(function(t){var e=t.data.me,i=e.scroll;if(i)for(var s in i)"function"==typeof i[s].callback&&(t.data="object"==typeof i[s].data?i[s].data:{},i[s].callback.call(t.data.this||e,t))})),this},e.prototype.processJSON=function(t){if(this.json=o(t),this.vega=o(t),this.log.message("processJSON",t,this.json),t.width&&(this.options.width=t.width),t.height&&(this.options.height=t.height),t.padding&&(this.options.padding=t.padding),t.axes)for(var e=0;e<t.axes.length;e++){var i="";"bottom"==t.axes[e].orient&&(i="xaxis"),"left"==t.axes[e].orient&&(i="yaxis"),i&&(this.options[i]=t.axes[e])}return this},e.prototype.initialize=function(t,e){if(this.initializing)return this;this.log.message("initialize",t),this.initializing=!0,"function"==typeof e&&(this.callback=e),t||this.log.error(t,e);var i=S(t);if(0==i.length)return this.log.error("No DOM element to attach to",t),this;if(this.el=t,"lazy"==t.getAttribute("loading")&&!c(t))return TimeSeries.scroll[this.attr.index]={data:{me:this,el:t,callback:e,i:this.attr.index},callback:function(t){c(t.data.el)&&(t.data.me.initializing=!1,delete this.scroll[t.data.i],t.data.me.initialize(t.data.el,t.data.callback))}},this;var s=i.attr("vega-src");if(s&&(this.file=s),this.file||(this.file=""),"string"!=typeof this.file)return this;if(void 0===this.initializedValues&&(this.initializedValues={w:t.clientWidth,h:t.clientHeight}),!this.file)return this.postProcess(),this;var r=this.file.lastIndexOf("/");return this.directory=r>=0?this.file.substr(0,r+1):"",S().ajax(this.file,{dataType:"json",this:this,cache:!0,success:function(t,e){t?(this.processJSON(t),this.postProcess()):this.error("JSON is invalid",e.url)},error:function(t,e){this.error("Unable to load configuration",e.url,t)}}),this},e.prototype.postProcess=function(){var t,e,i,s,r,n,h,l;if(this.log.message("postProcess",this),this.log.time("postProcess"),this.json){var c,p;for(this.json._extend||(this.json._extend={}),this.json._views||(this.json._views=[]),n=0,r=0;r<this.json.marks.length;r++)this.json.marks[r].name||(this.json.marks[r].name="fake-id-"+n,this.log.warning("No name for mark "+r+" so naming it "+this.json.marks[r].name)),n++;if(this.json._extend.marks)for(r=0;r<this.json._extend.marks.length;r++)this.json._extend.marks[r].name||(this.json._extend.marks[r].name="fake-id-"+n,this.log.warning("No name for mark "+r+" so naming it "+this.json._extend.marks[r].name)),n++;for(c=!1,r=0;r<this.json._views.length;r++)"default"==this.json._views[r].name&&(c=!0,p=o(this.json._views[r]));if(c||(p={name:"default",title:this.json.title||"Default",description:this.json.description||"The initial view",markers:[]}),p.scales||(p.scales=o(this.json.scales)),p.axes||(p.axes=o(this.json.axes)),p._extend||(p._extend=o(this.json._extend)),!c){for(r=0;r<this.json.marks.length;r++)p.markers.push({name:this.json.marks[r].name,include:!0,visible:!0});this.json._views.unshift(p)}this._view=p}if(this.options.fit&&(this.options.width=this.initializedValues.w,this.options.height=this.initializedValues.h),this.options.logging=this.log.logging,this.options.logtime=this.log.logtime,this.options.scrollWheelZoom=!0,this.json.scales)for(t=0;t<this.json.axes.length;t++){for(r=0;r<this.json.scales.length;r++)if(this.json.axes[t].scale==this.json.scales[r].name&&(e="left"==this.json.axes[t].orient?"yaxis":"xaxis",this.options[e].type=this.json.scales[r].type||("xaxis"==e?"utc":"linear"),this.options[e].padding=this.json.scales[r].padding||0,this.json.scales[r].range&&(this.options[e].range=this.json.scales[r].range),this.json.scales[r].domain))for(this.options[e].domain=o(this.json.scales[r].domain),i=0;i<this.options[e].domain.length;i++)this.options[e].domain[i].signal&&(this.options[e].domain[i]=a(this.options[e].domain[i].signal));if(this._view._extend.scales)for(l=0;l<this._view._extend.scales.length;l++)this.json.axes[t].scale==this._view._extend.scales[l].name&&(e="left"==this.json.axes[t].orient?"yaxis":"xaxis",this.options[e].highprecision=this._view._extend.scales[l].highprecision||!1)}for(this.graph=new Graph(this.el,this.options),s=S(this.el),h='<div class="loader"><div class="spinner">',r=1;r<6;r++)h+='<div class="rect'+r+' seasonal"></div>';return h+="</div></div>",s.addClass("timeseries").append(h),this.makeMenu(),this.json&&this.json.data&&this.loadDatasets(this.json.data),this.log.time("postProcess"),this},e.prototype.updateMessage=function(t,e,i,s){var r=S(this.el).find(".loader");return t?(this.message||(this.message={}),t=this.el.getAttribute("id")+"-"+t,this.message[t]||(r.append('<div id="'+t+'"><div class="loader-message"></div></div>'),r=r.find("#"+t),this.message[t]={el:r,message:r.find(".loader-message")}),e||"number"==typeof i&&i<=100?(this.message[t].message.length>0&&(this.message[t].message[0].innerHTML=e),"number"==typeof i&&i<=100&&(this.message[t].progress||(this.message[t].el.append('<div class="progressbar"><div class="progress-inner"></div></div>'),this.message[t].progress=this.message[t].el.find(".progress-inner")),this.message[t].progress.css({width:i+"%"}),s&&this.message[t].progress.css({background:s}))):this.message[t].el.remove(),this):(r.html(""),this)},e.prototype.makeMenu=function(){var t,e,i,s,n,a;if(e=(t=S(this.el)).attr("id"),0==t.find(".menuholder").length){for(a=[{key:"views",title:"Views",html:'<ol class="views"></ol>'},{key:"layers",title:"Marker layers",html:'<ol class="layers"></ol>',on:!0},{key:"config",title:"Options",html:'<div class="row"><button class="fullscreen icon" title="Toggle fullscreen">'+r("fit")+'</button><button class="autozoom">Reset view</button></div><div class="row"><button class="fontup">A&plus;</button><button class="fontreset">A</button><button class="fontdn">A&minus;</button></div>'},{key:"save",title:"Save",html:'<div class="row"><button class="savepng" data="white">Save as PNG</button><button class="savepng">Save as transparent PNG</button><button class="savevega">Save as JSON (VEGA-compatible)</button><button class="editvega">Open selected view in VEGA</button></div>'},{key:"about",title:"About",html:'<p>Figure produced with the <a href="https://aperiosoftware.github.io/timeseries.js/">AAS timeseries.js</a> package version '+TimeSeries.version+".</p>"}],s="",n="",i=0;i<a.length;i++)s+='<li class="submenu-'+a[i].key+'"><button '+(a[i].on?'class="on" ':"")+'data="submenu-'+a[i].key+'" title="'+a[i].title+'">'+r(a[i].key,"white")+"</button></li>",n+=a[i].html?'<div class="menu-panel submenu-'+a[i].key+(a[i].on?" on":"")+'">'+a[i].html+"</div>":"";for(s+="<li></li>",t.prepend('<div class="menuholder"><input type="checkbox" id="'+e+'_hamburger" class="hamburger"><label for="'+e+'_hamburger" class="hamburger">'+r("menu","white")+'<span class="nv">Toggle menu (if not visible)</span></label><menu class="timeseries-actions-wrapper"><ul class="submenu">'+s+"</ul>"+n+"</menu></div>"),i=0;i<a.length;i++)a[i].on&&t.find("submenu-"+a[i].key).addClass("on");t.find(".menuholder").on("mouseover",(function(){S(".graph-tooltip").css({display:"none"})})),t.find("#"+e+"_hamburger").on("click",{me:this},(function(t){var e=this[0].checked?0:-1;this.parent().find("menu button, menu a").attr("tabIndex",e)})),t.find("button.fullscreen").on("click",{g:this.graph},(function(t){t.data.g.toggleFullScreen()})),t.find("button.autozoom").on("click",{g:this.graph},(function(t){t.data.g.zoom()})),t.find("button.fontup").on("click",{g:this.graph},(function(t){t.data.g.scaleFont(1)})),t.find("button.fontdn").on("click",{g:this.graph},(function(t){t.data.g.scaleFont(-1)})),t.find("button.fontreset").on("click",{g:this.graph},(function(t){t.data.g.scaleFont(0)})),t.find("button.savevega").on("click",{me:this},(function(t){t.data.me.save("vega")})),t.find("button.editvega").on("click",{me:this},(function(t){t.data.me.save("vegaeditor")})),t.find("button.savepng").on("click",{me:this},(function(t){t.data.me.save("png",{background:S(t.currentTarget).attr("data")})})),t.find(".submenu button").on("click",{el:t},(function(t){t.data.el.find(".on").removeClass("on");var e=S(t.currentTarget),i=e.attr("data");e.addClass("on"),t.data.el.find(".menu-panel."+i).addClass("on")}))}return this},e.prototype.loadDatasets=function(t){if(this.log.message("loadDatasets",t),this.log.time("loadDatasets"),!t)return this;if(this.updateMessage("main","Loading data..."),0==t.length)return S(this.el).find(".loader").html("&#9888; No data defined"),this;var e,i,s,r,n;for(this.datasets={},e=t.length,"",i=[],this.progress.datasets={todo:e,done:0},s=function(t,e){var i,s="json";e&&e.dataset&&e.dataset.format&&"csv"==e.dataset.format.type&&(s="csv"),"csv"==s?i=function(t,e){"string"==typeof t&&(t=function(t,e){e=e||",";var i=new RegExp("(\\"+e+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+e+"\\r\\n]*))","gi"),s=[[]],r=!1;for(;r=i.exec(t);){var n,a=r[1];a.length&&a!==e&&s.push([]),n=r[2]?r[2].replace(new RegExp('""',"g"),'"'):r[3],s[s.length-1].push(n)}return s}(t));var i,s,r,n,a,o=[];for(s=new Array(t[0].length),r=new Array(t[0].length),n=0;n<t[0].length;n++)r[n]=t[0][n],s[n]=e[r[n]]||"string";for(a=1;a<t.length;a++)if(t[a]&&""!=t[a]){for(i={},n=0;n<t[a].length;n++)"number"==s[n]?i[r[n]]=parseFloat(t[a][n]):i[r[n]]=t[a][n];o.push(i)}return o}(t,e.dataset.format.parse):"json"==s&&(i=t[0]),this.datasets[e.dataset.name]={json:i,parse:e.dataset.format.parse},this.datasets[e.dataset.name][s]=t,this.progress.datasets.done++,this.log.message("loaded dataset",e.dataset.name),this.progress.datasets.done==this.progress.datasets.todo&&this.processDatasets()},r=0;r<e;r++)t[r].url&&i.push(this.directory+t[r].url);for(this.log.message("files",i),r=0;r<e;r++)t[r].values&&s.call(this,t[r].values,{dataset:t[r],files:i});for(n=0;n<i.length;n++)TimeSeries.loadFromDataFile(i[n],{this:this,dataset:t[n],files:i},s);return this.updateMessage("main",""),this.log.time("loadDatasets"),this},e.prototype.updateLayerMenu=function(){var t,e,i,s,r,n,a,h,l,c,p,d,u,f,m,g,v,y,x,b,k;for(t in(r=this.graph.canvas.container.find(".layers")).find("li").remove(),f={},m={},this.graph.marks)this.graph.marks[t]&&(i=S(this.el).attr("id")+"_"+t,u=this.graph.marks[t].desc,this.graph.marks[t].include&&(void 0===f[u]&&(f[u]=[]),f[u].push(t)));for(u in e=0,f)if(f[u]&&void 0!==f[u]){for(i=S(this.el).attr("id")+"_"+e,d=this.graph.marks[f[u][0]],r.append('<li><input type="checkbox" id="'+i+'" data="'+u+'" /><label for="'+i+'"><span class="key" style="background-color:'+d.format.fill+";"+("area"==d.type&&d.format.fillOpacity?"opacity:"+d.format.fillOpacity+";":"")+'">?</span>'+u+"</label></li>"),h=(a=(n=r.find("#"+i)).parent()).find(".key"),n.on("change",{me:this,k:f[u]},(function(t){var e,i,s;for(e=t.data.me.graph,i=0;i<t.data.k.length;i++)s=t.data.k[i],e.marks[s].show=!e.marks[s].show;e.redraw({update:!0,cancelable:!1}),t.currentTarget.checked?this.parent().removeClass("inactive"):this.parent().addClass("inactive")})).on("focus",{layers:r},(function(t){t.data.layers.find("li").removeClass("on").removeClass("selected"),this.parent().addClass("on")})),r.on("mouseover",{layers:r},(function(t){t.data.layers.find(".selected").removeClass("selected")})),m[f[u][0]]=n.parent(),p=!1,t=0;t<f[u].length;t++)["symbol","rect","line","rule","text","area"].indexOf(d.type)>=0&&(p=!0);if(p&&1==h.length&&(s=window.getComputedStyle(h[0]),l=parseInt(s.width),c=parseInt(s.height),h.html('<canvas style="width:'+l+"px;height:"+c+'px;"></canvas>')),1==a.find("canvas").length)for(y=a.find("canvas")[0],l=parseInt(a.find("canvas").css("width")),c=parseInt(a.find("canvas").css("height")),v=y.getContext("2d"),g=window.devicePixelRatio,y.width=l*g,y.height=c*g,v.scale(g,g),v.clearRect(0,0,l,c),v.fillStyle="#ffffff",v.rect(0,0,l,c),v.fill(),t=0;t<f[u].length;t++)(d=this.graph.marks[f[u][t]]).include&&(h.css({"background-color":"none"}),this.graph.setCanvasStyles(v,d.mark[0]),"symbol"==d.type?this.graph.drawShape(o(d.mark[0]),{ctx:v,x:l/2,y:c/2}):"rect"==d.type?d.mark[0].props.x1&&d.mark[0].props.x2&&d.mark[0].props.y1&&d.mark[0].props.y2?this.graph.drawRect(o(d.mark[0]),{ctx:v,x1:0,y1:0,x2:l,y2:c}):this.graph.drawRect(o(d.mark[0]),{ctx:v,x1:l/2,y1:0,x2:l/2,y2:c}):"area"==d.type?this.graph.drawRect(o(d.mark[0]),{ctx:v,x1:0,y1:0,x2:l,y2:c}):"line"==d.type?(v.beginPath(),v.moveTo(0,c/2),v.lineTo(l,c/2),v.lineWidth=d.encode.enter.strokeWidth.value||.8,v.stroke()):"rule"==d.type?(v.beginPath(),v.lineWidth=d.encode.enter.strokeWidth.value||1,d.data[0].x2||(d.data[0].x2=o(d.data[0].x)),d.data[0].y2||(d.data[0].y2=o(d.data[0].y)),d.data[0].y.value==d.data[0].y2.value?(v.moveTo(0,c/2+.5),v.lineTo(l,c/2+.5)):d.data[0].x.value==d.data[0].x2.value?(v.moveTo(l/2+.5,0),v.lineTo(l/2+.5,c)):(v.moveTo(0,0),v.lineTo(l,c)),v.stroke()):"text"==d.type&&this.graph.drawTextLabel("T",l/2,c/2,{ctx:v,format:{align:"center",baseline:"middle"}}));for(k=!1,b=!1,t=0;t<f[u].length;t++)this.graph.marks[f[u][t]].include&&(k=!0),this.graph.marks[f[u][t]].show&&(b=!0);(x=r.find("#"+i).parent()).css({display:k?"block":"none"}),b?(x.removeClass("inactive"),r.find("#"+i)[0].checked=!0):(x.addClass("inactive"),r.find("#"+i)[0].checked=!1),e++}return this.graph.on("hoverpoint",{lookup:m,layers:r},(function(t){if(t.data.layers.find("li").removeClass("selected"),0!=t.matches.length)for(var e=0;e<t.matches.length;e++)t.data.lookup[t.matches[e].series]&&t.data.lookup[t.matches[e].series].addClass("selected")})),this},e.prototype.getViews=function(){var t,e,i;for(t=[],i=this.json._views,e=0;e<i.length;e++)t.push({title:i[e].title||"",name:i[e].name||"",description:i[e].description||""});return t},e.prototype.setView=function(t,e){var i,s,r,n,h,l,c,p,d,u,f,m;if(s=this.json,"number"!=typeof t){for(m=JSON.stringify(t),l=0;l<s._views.length;l++)JSON.stringify(s._views[l])!=m||(t=l);if("number"!=typeof t)return this.log.error("Invalid view number provided: "+t),this}if("number"!=typeof t)return this.log.error("Invalid view index provided: "+t),this;if(t>=s._views.length)return this.log.error("The maximum index is "+(s._views.length-1)),this;for(l=0;l<s._views.length;l++)s._views[l].active=t==l;for(r=o(s._views[t]),c={},n=0;n<s.axes.length;n++){if(r.scales)for(p=0;p<r.scales.length;p++)if(s.axes[n].scale==r.scales[p].name&&("object"!=typeof c[f="left"==s.axes[n].orient?"yaxis":"xaxis"]&&(c[f]={}),c[f].type="xaxis"==f?"utc":"linear",c[f].padding=0,r.scales[p]&&(void 0!==r.scales[p].type&&(c[f].type=r.scales[p].type),void 0!==r.scales[p].padding&&(c[f].padding=r.scales[p].padding)),(r.scales[p].range||s._views[0].scales[p].range)&&(c[f].range=o(r.scales[p].range||s._views[0].scales[p].range)),s._views[0].scales[p].domain||r.scales[p].domain))for(c[f].domain=o(r.scales[p].domain||s._views[0].scales[p].domain),h=0;h<c[f].domain.length;h++)c[f].domain[h].signal&&(c[f].domain[h]=a(c[f].domain[h].signal));r.axes&&(c[f="left"==s.axes[n].orient?"yaxis":"xaxis"].title=void 0!==r.axes[n].title?r.axes[n].title:"")}if(this._view=r,(i=this.graph).setOptions(c),r.markers){for(l in i.marks)if(i.marks[l])for(-1,i.marks[l].include=!1,p=0;p<r.markers.length;p++)i.marks[l].name==r.markers[p].name&&(p,i.marks[l].include=!0,i.marks[l].show=r.markers[p].visible)}else this.log.warning("No markers provided for view."+(r.marks?' You may have accidentally used "marks" as the key.':""));for(this.updateLayerMenu(),this.updateOptionsMenu(),d=i.canvas.container.find(".views").find("li"),l=0;l<d.length;l++)u=S(d[l]),t==l?u.addClass("selected").find("input").attr("checked","checked"):u.removeClass("selected").find("input").attr("checked","");return i.updateData(e),this},e.prototype.updateViewMenu=function(){var t,e,i,s,r;if("abcdefghijklmnopqrstuvwxyz",e=this.graph.canvas.container.find(".views"),s=this.graph.canvas.container.find(".submenu-views"),this.json._views.length<2)return e.css({display:"none"}),s.css({display:"none"}),this;for(e.css({display:""}),s.css({display:""}),r=0,t=0;t<this.json._views.length;t++)this.json._views[t].active&&(r=this.json._views[t].active);for(this.json._views[r].active=!0,t=0;t<this.json._views.length;t++)i=S(this.el).attr("id")+"-view-"+t,0==e.find("#"+i).length&&(e.append("<li "+(this.json._views[t].active?' class="selected"':"")+'><input type="radio"'+(this.json._views[t].active?' checked="checked"':"")+' id="'+i+'" name="'+S(this.el).attr("id")+'-view" data="'+t+'" /><label for="'+i+'" title="'+this.json._views[t].description+'"><span style="font-family:monospace;">'+"abcdefghijklmnopqrstuvwxyz".substr(t,1).toUpperCase()+".</span> "+this.json._views[t].title+"</label></li>"),e.find("#"+i).on("change",{me:this,id:i,i:t,el:e},(function(t){t.data.me.setView(t.data.i)})).on("focus",{el:e},(function(t){t.data.el.find("li").removeClass("on"),this.parent().addClass("on")})));return this},e.prototype.updateOptionsMenu=function(){var t,e,i,s,r,n,a,o,h=S(this.el),l=h.attr("id");if(h.find("#"+l+"_axisformat").length>0&&h.find("#"+l+"_axisformat").parent().remove(),this._view._extend&&this._view._extend.scales)for(s=0;s<this._view._extend.scales.length;s++)if("xscale"==this._view._extend.scales[s].name){if(o=this._view._extend.scales[s].input,e="absolute",this.xformats[o].types.phase&&(e="phase"),this.xformats[o].types.relative&&(e="relative"),!this.xformats[o]&&!this.xformats[e])return this.log.error('Input format "'+o+'" is not valid.'),this;for(i in"phase"==e?(t=this._view._extend.scales[s].output||"unity",r="Phase format"):(t=this._view._extend.scales[s].output||"auto",r="Date format"),n='<div class="row"><label for="'+l+'_axisformat">'+r+': </label><select id="'+l+'_axisformat">',a=!1,this.xformats)this.xformats[i]&&this.xformats[i].types[e]&&(n+='<option value="'+i+'"'+(i==t?' selected="selected"':"")+">"+this.xformats[i].title+"</option>",t&&this.xformats[t]&&i==t&&this.setAxisFormat("x",t),i==t&&(a=!0));a||this.log.error(t+" is not an available format",this.xformats,e),n+="</select></div>",h.find(".menu-panel.submenu-config").append(n),h.find("#"+l+"_axisformat").on("change",{me:this},(function(t){t.data.me.setAxisFormat("x",this[0].value,!1)}))}return this},e.prototype.setAxisFormat=function(t,e,i){var s="";if(this._view&&this._view._extend.scales)for(var r=0;r<this._view._extend.scales.length;r++)"xscale"==this._view._extend.scales[r].name&&(s=this._view._extend.scales[r].input);return this.graph&&(this.xformats[e]?(this.graph[t].units=s,this.graph.setAxisFormat(t,e,this.xformats),this.graph.defineAxis(t,this.graph[t].min,this.graph[t].max).redraw(i)):(this.xformats[s]||this.log.error("Input format "+s+" is not a known format"),this.xformats[e]||this.log.error("Output format "+e+" is not a known format"))),this},e.prototype.processDatasets=function(){var t,e,s,r,n,a,h;for(this.log.message("processDatasets",this.attr.showaswego,this.graph.marks),this.log.time("processDatasets"),this.progress.marks||(this.progress.marks={todo:0,done:0,mark:{}}),h=[this.json.marks],this.json._extend.marks&&h.push(this.json._extend.marks),r=0,0;r<h.length;r++)for(t=0;t<h[r].length;t++)h[r][t].name?this.progress.marks.mark[h[r][t].name]={done:-1,todo:0}:this.log.error("No name for "+h[r][t].title+" ("+t+")");for(e in this.progress.datasets.old=this.progress.datasets.used,this.datasets)this.datasets[e]&&!this.datasets[e].data&&(this.datasets[e].data=this.datasets[e].json);for(this.graph.addDatasets(this.datasets),this.progress.marks.todo=this.json.marks.length+(this.json._extend.marks?this.json._extend.marks.length:0),n=function(t){this.progress.marks.done++,this.progress.marks.mark[t.name].done=t.i,this.progress.marks.mark[t.name].todo=t.total,this.log.message("Processed "+t.name,this.progress.marks.mark[t.name]),this.updateMessage(t.name,""),this.attr.showaswego&&this.graph.updateData(),this.progress.marks.done==this.progress.marks.todo&&this.finalize()},a=function(t){this.progress.marks.mark[t.mark.name].done=t.i,this.progress.marks.mark[t.mark.name].todo=t.total;var e="";return t.mark.encode&&t.mark.encode.update&&(t.mark.encode.update.fill&&(e=t.mark.encode.update.fill.value),!e&&t.mark.encode.update.stroke&&(e=t.mark.encode.update.stroke.value)),this.updateMessage(t.mark.name,"Processing "+(t.mark.description||t.mark.name),100*t.i/t.total,e),this},this.updateMessage("main",""),r=0;r<this.json.marks.length;r++)s=o(this.json.marks[r]),this.progress.marks.mark[s.name].done<=0&&(this.progress.marks.mark[s.name].done=0,i(this,r,s,{success:n,progress:a}));if(this.json._extend.marks)for(r=0;r<this.json._extend.marks.length;r++)(s=this.json._extend.marks[r]).include=!1,i(this,r+this.json.marks.length+r,o(s),{success:n,progress:a});for(r in this.graph.marks)if(this.graph.marks[r])for(t=0;t<this._view.markers.length;t++)this.graph.marks[r].name==this._view.markers[t].name&&(this._view.markers[t].visible||(this.graph.marks[r].show=!1));return this.progress.datasets.used!=this.progress.datasets.old&&this.attr.showaswego&&this.graph.updateData(),this.log.time("processDatasets"),this},e.prototype.finalize=function(){function t(t){this.graph.canvas.container.find(".loader").remove(),this.updateLayerMenu(),this.updateViewMenu(),this.updateOptionsMenu(),"function"==typeof this.callback&&this.callback.call(this),this.log.info("Finished processing "+this.el.getAttribute("id"))}return this.log.message("finalize",this.attr.showaswego,this.graph.marks),this.updateMessage("main",""),0==this.attr.showaswego?this.graph.updateData({callback:t,self:this}):t(),this},e.prototype.save=function(t,e){if("function"!=typeof Blob)return this;var i,s,r,n,a,h,l;function c(t){var e=new Blob([t],{type:a.type});var i=document.createElement("a");i.download=a.file,i.innerHTML="Download File",null!=window.webkitURL?i.href=window.webkitURL.createObjectURL(e):(i.href=window.URL.createObjectURL(e),i.onclick=function(t){document.body.removeChild(t.target)},i.style.display="none",document.body.appendChild(i)),i.click()}if(a={type:"text/text",file:this.file?this.file.replace(/.*\//g,""):"timeseries.json"},e||(e={}),"vega"==t||"vegaeditor"==t){for(l=o(this.vega),i=0;i<l.data.length;i++)delete l.data[i].url,h="json",this.datasets[l.data[i].name].csv&&(h="csv"),l.data[i].values=this.datasets[l.data[i].name][h];if("vegaeditor"==t){n=this._view;var p,d=[],u={};for(p=0;p<n.markers.length;p++){for(!1,r=0;r<this.json.marks.length;r++)u[n.markers[p].name]||this.json.marks[r].name!=n.markers[p].name||(d.push(o(this.json.marks[r])),u[n.markers[p].name]=!0);if(!u[n.markers[p].name]&&this.json._extend&&this.json._extend.marks)for(r=0;r<this.json._extend.marks.length;r++)u[n.markers[p].name]||this.json._extend.marks[r].name!=n.markers[p].name||(d.push(o(this.json._extend.marks[r])),u[n.markers[p].name]=!0)}l.marks=d,n.scales&&(l.scales=n.scales),n.axes&&(l.axes=n.axes),n.title&&(l.title=n.title),delete l._extend,delete l._views}s=JSON.stringify(l)}if("vega"==t&&(a.type="text/json",a.file=this.file?this.file.replace(/.*\//g,""):e.file||"timeseries.json",c(s)),"vegaeditor"==t){var f=window.open("https://vega.github.io/editor/#/","VEGA","");setTimeout((function(){f.postMessage({mode:"vega",spec:s,config:{axisY:{minExtent:30}},renderer:"svg"},"https://vega.github.io")}),1e3)}return"png"==t&&(e&&e.background&&(this.graph.background=e.background,this.graph.clear().drawAxes().resetDataStyles().drawData(!1)),a.type="image/png",a.file=e.file||"timeseries.png",this.graph.canvas.c.toBlob(c,a.type),e&&(this.graph.background="",this.graph.clear().drawAxes().resetDataStyles().drawData(!1))),this},e.prototype.error=function(t,e,i){return this.log.error(t,e,i),0==S(this.el).find(".loader").length&&S(this.el).html('<div class="loader"><div class="spinner"></div></div>').css({position:"relative",width:"100%",height:"200px"}),S(this.el).find(".spinner").length>0&&(S(this.el).find(".loader").html("&#9888; "+t),this.remove()),S(this.el).find(".loader").append("<br />"+e),this},e.prototype.remove=function(){return S(this.el).find(".menuholder").remove(),S(this.el).find(".canvasholder").remove(),{}};function a(t,e){if("object"==typeof e)for(var i in e)"object"==typeof e[i]&&"Num"==e[i].type&&(e[i]="function"==typeof e[i].toValue?e[i].toValue():e[i].v);return Function("\"use strict\";function zeroPad(d,n){ if(!n){ n = 2;} d = d+''; while(d.length < n){ d = '0'+d; } return d; };function timeFormat(t,f){ var d,micros,ds,dl,m,ms,ml; d = new Date(t*1000); micros = ''; m = (t+'').match(/\\.[0-9]{3}([0-9]+)/);if(m && m.length==2){ micros = m[1]; }; ds = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat']; dl = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday']; ms = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec']; ml = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec']; return f.replace(/%a/g,ds[d.getDay()]).replace(/%Y/g,d.getFullYear()).replace(/%a/g,dl[d.getDay()]).replace(/%b/g,ms[d.getMonth()]).replace(/%B/g,ml[d.getMonth()]).replace(/%d/g,(d.getDate().length==1 ? '0':'')+d.getDate()).replace(/%m/,(d.getMonth()+1)).replace(/%H/,zeroPad(d.getUTCHours())).replace(/%M/,zeroPad(d.getUTCMinutes())).replace(/%S/,zeroPad(d.getUTCSeconds())).replace(/%L/, (zeroPad(d.getUTCMilliseconds(),3)+micros).replace(/([0-9])0+$/,function(m,p1){ return p1; }));};function datetime(y,m,d,h,mn,sc,ms){ return (new Date(y+'-'+zeroPad(m+1,2)+'-'+(typeof d==='number' ? zeroPad(d,2):'01')+(typeof h==='number' ? 'T'+(zeroPad(h,2)+':'+(typeof mn==='number' ? zeroPad(mn,2)+(typeof sc==='number' ? ':'+zeroPad(sc,2)+(ms ? '.'+zeroPad(ms,3):''):''):'00'))+'Z':''))).valueOf()/1000; };function date(d){ return (new Date(d)).getTime()/1000; };var datum = "+JSON.stringify(e)+"; return ("+t+")")()}function o(t){return JSON.parse(JSON.stringify(t))}function h(t,e,i){"number"==typeof t&&(t=Num(t));var s=new l(t,e);return"jd"==i?s.toJD():"mjd"==i?s.toMJD():"tjd"==i?s.toTJD():"unix"==i?s.toUNIX():"seconds"==i?s.toSeconds():"iso"==i?s.toDate().toISOString():0}function l(t,e){return this.epoch={jd:2440587.5,mjd:2400000.5,tjd:2440000.5},this.d2ms=864e5,"number"==typeof t&&(t=Num(t)),"jd"==e&&(this.jd=t),"mjd"==e&&(this.jd=t.plus(this.epoch.mjd)),"tjd"==e&&(this.jd=t.plus(this.epoch.tjd)),"unix"==e&&(this.unix=t),"iso"!=e&&"locale"!=e&&e||(this.unix=t.times(1e3)),this.toJD=function(){return this.jd?this.jd.toValue():this.unix?this.unix.div(this.d2ms).plus(this.epoch.jd).toValue():0},this.toUNIX=function(){return this.unix?this.unix.toValue():this.jd?this.jd.minus(this.epoch.jd).times(this.d2ms).toValue():0},this.toSeconds=function(){return this.unix?this.unix.div(1e3).toValue():this.jd?this.jd.minus(this.epoch.jd).times(this.d2ms).div(1e3).toValue():0},this.toMJD=function(){return this.unix&&(this.jd=this.unix.div(this.d2ms).plus(this.epoch.jd)),this.jd?this.jd.minus(this.epoch.mjd).toValue():0},this.toTJD=function(){return this.unix&&(this.jd=this.unix.div(this.d2ms).plus(this.epoch.jd)),this.jd?this.jd.minus(this.epoch.tjd).toValue():0},this.toDate=function(){return this.jd?new Date(this.toUNIX()):this.unix?new Date(this.unix.toValue()):new Date},this}function c(t){var e=0,i=t;do{e+=i.offsetTop||0,i.offsetLeft||0,i=i.offsetParent}while(i);return window.scrollY+window.innerHeight+20>e&&window.scrollY<e+t.offsetHeight}t.AASTimeSeriesEmbed=function(t,e,i){TimeSeries.create(e,i).initialize(S(t)[0])},t.TimeSeries=TimeSeries}(window||this)},function(t,e,i){var s=i(8);"string"==typeof s&&(s=[[t.i,s,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};i(1)(s,r);s.locals&&(t.exports=s.locals)},function(t,e,i){(t.exports=i(0)(!1)).push([t.i,'/* Start of AAS */\r\nhtml, body {\r\n\tfont-size: 100%;\r\n}\r\n*, ::before, ::after {\r\n\t-webkit-box-sizing: border-box;\r\n\t-moz-box-sizing: border-box;\r\n\tbox-sizing: border-box;\r\n}\r\n@font-face {\r\n  font-family: franklin-gothic-urw;\r\n  src: url("https://use.typekit.net/af/9cb78a/0000000000000000000118ad/27/l?subset_id=2&fvd=n4&v=3") format("woff2"), url("https://use.typekit.net/af/9cb78a/0000000000000000000118ad/27/d?subset_id=2&fvd=n4&v=3") format("woff"), url("https://use.typekit.net/af/9cb78a/0000000000000000000118ad/27/a?subset_id=2&fvd=n4&v=3") format("opentype");\r\n  font-style: normal;\r\n  font-weight: 400;\r\n}\r\n@font-face {\r\n  font-family: franklin-gothic-urw-cond;\r\n  src: url("https://use.typekit.net/af/e984ad/0000000000000000000118b5/27/l?subset_id=2&fvd=n4&v=3") format("woff2"), url("https://use.typekit.net/af/e984ad/0000000000000000000118b5/27/d?subset_id=2&fvd=n4&v=3") format("woff"), url("https://use.typekit.net/af/e984ad/0000000000000000000118b5/27/a?subset_id=2&fvd=n4&v=3") format("opentype");\r\n  font-style: normal;\r\n  font-weight: 400;\r\n}\r\nbody {\r\n\tfont-family: "franklin-gothic-urw",sans-serif;\r\n\tfont-size: 16px;\r\n\tmargin: 0px;\r\n\tpadding: 0px;\r\n\tcolor: #333;\r\n\tfont-weight: normal;\r\n\tfont-style: normal;\r\n\tline-height: 1.5;\r\n\tcursor: auto;\r\n}\r\nh1, h2, h3, h4 { color: #007aa0; font-family: "franklin-gothic-urw-cond", sans-serif; }\r\nh1 { font-size: 32px; line-height: 1.25; }\r\nheader {\r\n\tbackground-color: rgb(204, 221, 246);\r\n\tcolor: rgb(51, 51, 51);\r\n\tmargin-bottom: 2em;\r\n}\r\nheader h1, header h2 { color: inherit; }\r\n.row {\r\n\twidth: 100%;\r\n\tmargin-left: auto;\r\n\tmargin-right: auto;\r\n\tmargin-top: 0;\r\n\tmargin-bottom: 2em;\r\n\tmax-width: 62.5rem;\r\n}\r\n.column, .columns {\r\n\tposition: relative;\r\n\tpadding-left: 0.9375rem;\r\n\tpadding-right: 0.9375rem;\r\n\tfloat: left;\r\n}\r\n.large-4 {\r\n\twidth: 33.33333%;\r\n}\r\n.large-8 {\r\n\twidth: 66.66667%;\r\n}\r\n.row > .large-4 { padding-left: 0px; }\r\n.row .large-8:last-child { padding-right: 0px; }\r\n[class*="column"] + [class*="column"]:last-child {\r\n\tfloat: right;\r\n}\r\n.panel.callout {\r\n\tborder-style: solid;\r\n\tborder-width: 1px;\r\n\tborder-color: #b6edff;\r\n\tpadding: 1.25rem;\r\n\tbackground: #ecfaff;\r\n\tbackground-color: rgb(236, 250, 255);\r\n\tcolor: #333;\r\n}\r\n.panel.callout {\r\n\tbackground-color: #e4e9f2;\r\n\tborder: 0;\r\n}\r\np, ul, ol {\r\n\tline-height: 1.5;\r\n}\r\n.panel.callout > ul {\r\n\tlist-style: none;\r\n\tmargin: 0;\r\n\tpadding: 0px;\r\n}\r\n.panel.callout > ul > li {\r\n\tborder-top: 1px solid #ccc;\r\n\tpadding: .25em 0;\r\n}\r\n.panel.callout > ul > li:first-child {\r\n\tborder-top: 0px;\r\n\tpadding-top: 0;\r\n}\r\n.panel.callout > ul li:last-child {\r\n\tpadding-bottom: 0;\r\n}\r\n.panel.callout li > a {\r\n\tdisplay: block;\r\n\ttext-decoration: none;\r\n}\r\n.panel.callout a:not(.button) {\r\n\tcolor: #253788;\r\n}\r\n.panel.callout a:hover:not(.button), .panel.callout a:focus:not(.button) {\r\n\tcolor: #839ac6;\r\n}\r\nfooter {\r\n\tfont-size: 14px;\r\n}\r\n.bkg-tint {\r\n\tbackground-color: #e4e9f2!important;\r\n}',""])},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var i=e.protocol+"//"+e.host,s=i+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(t,e){var r,n=e.trim().replace(/^"(.*)"$/,(function(t,e){return e})).replace(/^'(.*)'$/,(function(t,e){return e}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(n)?t:(r=0===n.indexOf("//")?n:0===n.indexOf("/")?i+n:s+n.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")}))}},function(t,e,i){var s=i(11);"string"==typeof s&&(s=[[t.i,s,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};i(1)(s,r);s.locals&&(t.exports=s.locals)},function(t,e,i){(t.exports=i(0)(!1)).push([t.i,'a { text-decoration: none; }\r\na:hover { text-decoration: underline; }\r\n#forkme_banner { float: right; display: inline-block; color: white; padding: 0.5em 1em; background-color: rgba(0,0,0,0.4); border-radius: 0 0 8px 8px; }\r\nheader h1 { margin: 0px; padding-top: 0.5em; }\r\nheader h1 a { color: inherit; }\r\nheader h2, header h3 { margin-top: 0; margin-bottom: 0; }\r\nheader h2 + p { margin-top: 0.5em; }\r\nheader h2 + h3 { margin-bottom: 0.5em; }\r\n\r\n.msg {\r\n\tposition: fixed;\r\n\theight: 2em;\r\n\twidth: 100%;\r\n\tleft: 0px;\r\n\tbottom: 0px;\r\n\tpadding: 0 0.5em;\r\n\tbackground: #fff9ef;\r\n\tdisplay: none;\r\n\tz-index: 1000;\r\n\tborder-bottom: 1px solid rgba(0,0,0,0.1);\r\n\tline-height: 2em;\r\n\ttext-align: center;\r\n}\r\n\r\nfigure {\r\n\ttext-align: center;\r\n\tline-height: 0px;\r\n\tbackground: #fff;\r\n\tpadding: 0em;\r\n\tmargin: 0;\r\n}\r\nfigure > div {\r\n\tmargin: auto;\r\n\tdisplay: inline-block;\r\n\tline-height: 1em;\r\n}\r\n\r\nol {\r\n\tmargin: 0px;\r\n\tpadding: 0px;\r\n}\r\nol > li {\r\n\tlist-style: none;\r\n\tbackground-color: white;\r\n\tmargin-bottom: 2em;\r\n}\r\nol > li.padded { padding: 2em; }\r\nol > li.padded h2 { margin-top: 0px; }\r\nol > li h3 {\r\n\tmargin-top: 0px;\r\n}\r\n.vega-embed {\r\n\tposition: relative;\r\n}\r\n.vega-actions-wrapper {\r\n\tposition: absolute;\r\n\ttop: 0px;\r\n\tleft: 0px;\r\n\tz-index: 1000;\r\n}\r\nsection { \r\n\tpadding: 2em 0;\r\n}\r\nsection > h2 {\r\n\tmargin-top: 0px;\r\n}\r\ncode {\r\n\tcolor: #253788;\r\n\tfont-weight: 600;\r\n}\r\npre.prettyprint {\r\n\tfont-size: 14px;\r\n\tbackground: rgba(228, 233, 242, 0.4);\r\n\tpadding: 1em;\r\n\ttab-size: 4;\r\n\t-moz-tab-size: 4;\r\n}\r\n\r\n\r\nfigure figcaption {\r\n\ttext-align: center;\r\n\tfont-size: 0.8em;\r\n\tcolor: #555;\r\n}\r\n\r\nfigure figcaption {\r\n\tline-height: 1.2em;\r\n\tmargin-top: 0.5em;\r\n\tmargin-bottom: 1em;\r\n}\r\n\r\ntable.properties { border-collapse: collapse; text-align: left; }\r\ntable.properties th, table.properties td { border: 1px solid #cccccc; padding: 6px 12px; }\r\ntable.properties tbody tr:nth-child(2n+1) { background-color: #f8f8f8; }\r\n.notsupported { opacity: 0.1; text-decoration: line-through; }\r\n\r\n.seasonal { background-color: rgba(0, 110, 178, 1); }\r\n.loader {\r\n\tcontent: "";\r\n\tposition: absolute;\r\n\tleft: 0px;\r\n\tright: 0px;\r\n\ttop: 0px;\r\n\tbottom: 0px;\r\n\tbackground-color: rgba(0,0,0,0.1);\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tflex-direction: column;\r\n}\r\n.loader-message { margin-top: 0.5em; }\r\n.spinner {\r\n\twidth: 50px;\r\n\theight: 50px;\r\n\ttext-align: center;\r\n\tfont-size: 10px;\r\n}\r\n.spinner > div {\r\n\theight: 100%;\r\n\twidth: 6px;\r\n\tmargin-right: 1px;\r\n\tdisplay: inline-block;\r\n\t-webkit-animation: sk-stretchdelay 1.2s infinite ease-in-out;\r\n\tanimation: sk-stretchdelay 1.2s infinite ease-in-out;\r\n}\r\n.spinner .rect2 {\r\n\t-webkit-animation-delay: -1.1s;\r\n\tanimation-delay: -1.1s;\r\n}\r\n\r\n.spinner .rect3 {\r\n\t-webkit-animation-delay: -1.0s;\r\n\tanimation-delay: -1.0s;\r\n}\r\n\r\n.spinner .rect4 {\r\n\t-webkit-animation-delay: -0.9s;\r\n\tanimation-delay: -0.9s;\r\n}\r\n\r\n.spinner .rect5 {\r\n\t-webkit-animation-delay: -0.8s;\r\n\tanimation-delay: -0.8s;\r\n}\r\n\r\n@-webkit-keyframes sk-stretchdelay {\r\n\t0%, 40%, 100% { -webkit-transform: scaleY(0.4) }  \r\n\t20% { -webkit-transform: scaleY(1.0) }\r\n}\r\n\r\n@keyframes sk-stretchdelay {\r\n\t0%, 40%, 100% { \r\n\t\ttransform: scaleY(0.4);\r\n\t\t-webkit-transform: scaleY(0.4);\r\n\t}  20% { \r\n\t\ttransform: scaleY(1.0);\r\n\t\t-webkit-transform: scaleY(1.0);\r\n\t}\r\n}\r\n\r\n@media only screen and (max-width: 1080px) {\r\n\t.row { padding: 0 1em; }\r\n\tfigure > div, img, canvas { max-width: 100%!important; }\r\n}\r\n',""])},function(t,e,i){var s=i(13);"string"==typeof s&&(s=[[t.i,s,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};i(1)(s,r);s.locals&&(t.exports=s.locals)},function(t,e,i){(t.exports=i(0)(!1)).push([t.i,'.graph-tooltip {\r\n\tposition: absolute;\r\n\tbackground-color: rgb(0, 110, 178);\r\n\tcolor: white;\r\n\tpadding: 0.25em 0.5em;\r\n\tbox-shadow: 1px 1px 5px rgba(0,0,0,0.6);\r\n\ttext-align: left;\r\n\tz-index: 1000;\r\n}\r\n.graph-tooltip:after {\r\n\tposition: absolute;\r\n\tcontent: "";\r\n\tborder: 10px solid rgb(0, 110, 178);\r\n\ttop: 50%;\r\n}\r\n.graph-tooltip.graph-tooltip-nw:after, .graph-tooltip.graph-tooltip-ne:after, .graph-tooltip.graph-tooltip-s:after {\r\n\tborder-right-color: transparent!important;\r\n\tborder-left-color: transparent!important;\r\n\tborder-bottom-color: transparent!important;\r\n\tborder-bottom: 0px;\r\n\ttop: auto;\r\n}\r\n.graph-tooltip.graph-tooltip-n:after, .graph-tooltip.graph-tooltip-sw:after, .graph-tooltip.graph-tooltip-se:after {\r\n\tborder-right-color: transparent!important;\r\n\tborder-left-color: transparent!important;\r\n\tborder-top-color: transparent!important;\r\n\tborder-top: 0px;\r\n}\r\n.graph-tooltip.graph-tooltip-w:after {\r\n\tborder-top-color: transparent!important;\r\n\tborder-left-color: transparent!important;\r\n\tborder-bottom-color: transparent!important;\r\n\tborder-left: 0px;\r\n}\r\n.graph-tooltip.graph-tooltip-e:after {\r\n\tborder-top-color: transparent!important;\r\n\tborder-right-color: transparent!important;\r\n\tborder-bottom-color: transparent!important;\r\n\tborder-right: 0px;\r\n}\r\n\r\n.graph-tooltip.graph-tooltip-n:after {\r\n\ttransform: translate3d(-50%,-100%,0);\r\n\tleft: 50%;\r\n\ttop: 0px;\r\n}\r\n.graph-tooltip.graph-tooltip-ne:after {\r\n\ttransform: translate3d(50%,0,0);\r\n\tright: 0px;\r\n\ttop: 0px;\r\n}\r\n.graph-tooltip.graph-tooltip-e:after {\r\n\ttransform: translate3d(100%,-50%,0);\r\n\tright: 0px;\r\n}\r\n.graph-tooltip.graph-tooltip-se:after {\r\n\ttransform: translate3d(50%,0,0);\r\n\tright: 0px;\r\n\tbottom: 0px;\r\n}\r\n.graph-tooltip.graph-tooltip-s:after {\r\n\ttransform: translate3d(-50%,100%,0);\r\n\tleft: 50%;\r\n\tbottom: 0px;\r\n}\r\n.graph-tooltip.graph-tooltip-sw:after {\r\n\ttransform: translate3d(-50%,0,0);\r\n\tleft: 0px;\r\n\tbottom: 0px;\r\n}\r\n.graph-tooltip.graph-tooltip-w:after {\r\n\ttransform: translate3d(-100%,-50%,0);\r\n\tleft: 0px;\r\n}\r\n.graph-tooltip.graph-tooltip-nw:after {\r\n\ttransform: translate3d(-50%,0,0);\r\n\tleft: 0px;\r\n\ttop: 0px;\r\n}\r\n.graph-tooltip.graph-tooltip-n { transform: translate3d(-50%, 10px, 0); }\r\n.graph-tooltip.graph-tooltip-ne { transform: translate3d(calc(-100% - 10px), 0, 0); }\r\n.graph-tooltip.graph-tooltip-e { transform: translate3d(calc(-100% - 10px), -50%, 0); }\r\n.graph-tooltip.graph-tooltip-se { transform: translate3d(calc(-100% - 10px), -100%, 0); }\r\n.graph-tooltip.graph-tooltip-s { transform: translate3d(-50%, calc(-100% - 10px), 0); }\r\n.graph-tooltip.graph-tooltip-sw { transform: translate3d(10px, -100%, 0); }\r\n.graph-tooltip.graph-tooltip-w { transform: translate3d(10px, -50%, 0); }\r\n.graph-tooltip.graph-tooltip-nw { transform: translate3d(10px, 0, 0); }\r\n.aas-theme { font-size: 1em; }\r\n.aas-theme td:first-child{\r\n\ttext-align: right;\r\n\tvertical-align: top;\r\n}\r\n.timeseries { position: relative; }\r\n.timeseries .menuholder { position: absolute; overflow: hidden; width: 100%; height: 100%; }\r\n.timeseries .timeseries-actions-wrapper { height: auto; overflow-y: auto; max-height: 100%; }\r\n.timeseries .hamburger {\r\n\tcursor: pointer;\r\n\tdisplay: block;\r\n\topacity: 0.5;\r\n\twidth: 36px;\r\n\theight: 36px;\r\n\tposition: absolute;\r\n\tright: 0px;\r\n\ttop: 0px;\r\n\tfont-size: 1em;\r\n\tmargin: 0px;\r\n\tz-index: 2;\r\n}\r\n.timeseries label.hamburger .nv { display: none; }\r\n.timeseries input.hamburger { z-index: 1005; box-sizing: border-box; -moz-appearance: none; -webkit-appearance:none; -o-appearance:none; appearance: none; }\r\n.timeseries label.hamburger {\r\n\tpadding: 2px;\r\n}\r\n.timeseries label.hamburger path {\r\n\tfill: black!important;\r\n}\r\n.timeseries menu {\r\n\tright: -360px;\r\n\twidth: 360px;\r\n\ttop: 0px;\r\n\tmargin-top: 0px;\r\n\tposition: absolute;\r\n\theight: 100%;\r\n\toverflow-y: auto;\r\n\tz-index: 1000;\r\n\ttext-align: left;\r\n\tpadding: 0px;\r\n}\r\n.timeseries menu button { border: 0px; font-size: 1em; text-decoration: none!important; display: inline-block; padding: 2px; cursor: pointer; margin-right: 0.5em; margin-bottom: 0.5em; float: left; line-height: 1em; tab-index: -1; background-color: inherit; }\r\n.timeseries menu .menu-panel button { padding: 0.5em; background-color: #efefef; color: black; }\r\n.timeseries menu .menu-panel p:first-child { margin-top: 0px; }\r\n.timeseries menu .menu-panel p:last-child { margin-bottom: 0px; }\r\n.timeseries menu select { font-size: 1em; display: inline-block; cursor: pointer; margin-right: 0.5em; margin-bottom: 0.5em; tab-index: -1; }\r\n.timeseries menu h2 { color: inherit; margin: 0; line-height: 2em; font-size: 1em; }\r\n.timeseries menu a { color: inherit; text-decoration: underline; }\r\n.timeseries input.hamburger:hover ~ label.hamburger, .timeseries input.hamburger:focus ~ label.hamburger, .timeseries input.hamburger:checked ~ label.hamburger { opacity: 1; z-index: 3; }\r\n.timeseries input.hamburger:hover ~ label.hamburger, .timeseries input.hamburger:focus ~ label.hamburger, .timeseries input.hamburger:checked ~ label.hamburger, .timeseries menu { background-color: rgba(0, 110, 178, 0.85); color: white; }\r\n.timeseries input.hamburger:checked ~ label.hamburger:after, .timeseries menu ul.submenu li button,.timeseries menu ul.submenu li:last-child { background-color: rgb(0,0,0,0.4); }\r\n.timeseries input.hamburger:checked ~ label.hamburger path, .timeseries input.hamburger:hover ~ label.hamburger path, .timeseries input.hamburger:focus ~ label.hamburger path { fill: white!important;}\r\n.timeseries input.hamburger:checked ~ menu { right: 0px; }\r\n.timeseries .canvasholder { transition: margin-right 0.2s ease-in; margin-left: 0px; z-index: 1; }\r\n.timeseries .hamburger, .timeseries menu { transition: right 0.2s ease-in; }\r\n.timeseries input.hamburger:checked, .timeseries input.hamburger:checked + label.hamburger { right: 360px; }\r\n.timeseries menu ul.submenu { margin: 0px; padding: 0px; line-height: 0px; height: 36px; display: flex; }\r\n.timeseries menu ul.submenu li { margin: 0px; display: inline-block; }\r\n.timeseries menu ul.submenu li button { margin: 0px; width: 36px; height: 36px; color: #dfdfdf; }\r\n.timeseries menu ul.submenu li button.icon svg { width: 32px; }\r\n.timeseries menu ul.submenu li button:hover, .timeseries menu ul.submenu li button:focus, .timeseries menu ul.submenu li button.on { background-color: inherit; color: inherit; }\r\n.timeseries menu ul.submenu li:last-child { flex-grow: 1; right: 0px; height: 36px; left: 0px; position: relative; }\r\n.timeseries menu .menu-panel { padding: 1em; display: none; min-height: calc(100% - 2em); }\r\n.timeseries menu .menu-panel.on { display: block; }\r\n.timeseries menu .row { margin-bottom: -0.5em; clear: both; }\r\n.timeseries menu .row:before, .row:after { content:" "; display:table }\r\n.timeseries menu .row:after { content: ""; clear:both }\r\n.timeseries menu button.icon { line-height: 0px;  }\r\n.timeseries menu button.icon svg { width: 1em; height: auto; }\r\n.timeseries menu label { color: white; }\r\n.timeseries menu ol { padding-left: 0px; margin: 0px!important; background-color: white; color: black; }\r\n.timeseries menu ol li { list-style: none!important; margin: 0px!important; font-size: 1em; }\r\n.timeseries menu ol li.on, .timeseries menu ol li:hover, .timeseries menu ol li.selected { background-color: rgba(204, 221, 246, 1); }\r\n.timeseries menu ol li input[type=checkbox], .timeseries menu ol li input[type=radio] { font-size: 1em; opacity: 0.01; float:left; position: absolute; margin: 0.5em; width: 1.5em; height: 1.5em; }\r\n.timeseries menu ol li label { width: 100%; display: block; padding: 0.5em; cursor: pointer; margin: 0px; color: black;\r\n  -webkit-touch-callout: none; /* iOS Safari */\r\n    -webkit-user-select: none; /* Safari */\r\n     -khtml-user-select: none; /* Konqueror HTML */\r\n       -moz-user-select: none; /* Firefox */\r\n        -ms-user-select: none; /* Internet Explorer/Edge */\r\n            user-select: none; /* Non-prefixed version, currently\r\n                                  supported by Chrome and Opera */\r\n}\r\n.timeseries menu ol.layers li.inactive label { filter: grayscale(1); opacity: 0.15; }\r\n.timeseries menu ol.layers li .key { width: 1.5em; height: 1.5em; display: inline-block; float: left; margin-right: 0.25em; }\r\n.timeseries menu ol.layers li label:after { content: \'\'; position: relative; clear: both; }\r\n\r\n.timeseries .progressbar {\r\n\theight: 0.3em;\r\n\tleft: 0;\r\n\twidth: 200px;\r\n\tmargin: 0px;\r\n\tmargin-top: 0.5em;\r\n\tmax-width: 100%;\r\n\tposition: relative;\r\n\tbackground-color: rgba(0,0,0,0.2);\r\n}\r\n.timeseries .progressbar .progress-inner {\r\n    background-color: rgba(0, 110, 178, 1);\r\n    width: 0%;\r\n    height: 100%;\r\n    position: absolute;\r\n    left: 0px;\r\n    top: 0px;\r\n}\r\n@media only screen and (max-width: 520px) {\r\n\t.timeseries menu { width: 75%; right: -75%; }\r\n\t/*.timeseries input.hamburger:checked ~ .canvasholder { margin-left: 75%; }*/\r\n\t.timeseries input.hamburger:checked, .timeseries input.hamburger:checked + label.hamburger { right: 75%; }\r\n}',""])}]);